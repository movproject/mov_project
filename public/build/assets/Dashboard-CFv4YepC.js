import{g as Yt,r as l,u as Jt,j as t,H as qt,L as ze}from"./app-CDIyXfzz.js";import{A as Zt,X as za}from"./AuthenticatedLayout-BfeCSPIl.js";import{c as Ae,C as oe,B as Be}from"./button-p4g7T8hM.js";import{u as Qt}from"./useRole-BFFRoqTW.js";import{o as Ee,r as We,a as He,A as er,W as Ba,d as Xe}from"./firebase-CVaV2uOU.js";import{m}from"./proxy-DzmnYFB9.js";import{S as ar,B as Wa}from"./shield-CBO4JxOt.js";import{C as Ha}from"./clock-DZRm8Mac.js";import{C as Ge}from"./calendar-BJNpb-vr.js";import{R as tr,B as rr,a as nr,Z as sr}from"./zap-CUyq2s09.js";import{M as ir}from"./map-pin-BTZe7WcA.js";import{c as lr}from"./createLucideIcon-BwpbLGP3.js";import{c as F,p as De,a as or,i as dr,s as ge,b as cr,d as ur,e as ft,f as mr,g as pr,h as ie,j as hr,k as fr,l as gr,m as xr,n as Te,o as br,q as vr,r as yr,t as wr,u as jr,v as Nr,w as ea,x as kr,y as Se,z as ja,A as Xa,B as Pr,J as Na,C as Q,L as ne,S as Ar,D as Sr,R as Or,E as aa,F as $r,G as Ir,H as Er,I as ta,K as gt,M as Cr,N as xt,O as ra,P as Dr,Q as bt,T as vt,U as Tr,V as he,W as Fe,X as ya,Y as _r,Z as Rr,_ as Lr,$ as Mr,a0 as Kr,a1 as yt,a2 as zr,a3 as Ce,a4 as Ga,a5 as Ve,a6 as Br,a7 as wt,a8 as jt,a9 as Wr,aa as Ua,ab as Hr,ac as Nt,ad as Fa,ae as Xr,af as kt,ag as Gr,ah as Ur,ai as Fr,aj as Vr,ak as Yr,al as Jr,am as qr,an as Zr,ao as Pt,ap as Qr,aq as Va,ar as Ya,as as en,at as an,au as tn,av as rn,aw as Je,ax as nn,ay as sn,az as ln,aA as on,aB as dn,aC as cn,aD as un,aE as At,aF as mn,aG as Ja,aH as qa,aI as Za,aJ as pn,aK as xa,aL as hn,aM as fn,aN as gn,aO as xn}from"./CartesianChart-BLYFNSEz.js";import{C as Qa}from"./chart-column-Dze1WcNl.js";import{A as Ue}from"./index-B48i9LRO.js";import{C as et}from"./circle-check-BRr_3ZTi.js";import{D as bn,S as vn}from"./sprout-CuEqcC8b.js";import{T as at}from"./trending-up-CwclXeO4.js";import"./ApplicationLogo-eK3ZPc4I.js";import"./index-YTMNbmQK.js";import"./transition-2DpMPA6d.js";import"./book-open-CqqVG8Vg.js";import"./user-C27HZQAo.js";import"./with-selector-B5OWl5pm.js";const yn=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],wn=lr("chart-pie",yn);var na=e=>null;na.displayName="Cell";var St=e=>e.graphicalItems.polarItems,jn=F([De,or],dr),sa=F([St,ge,jn],cr),Nn=F([sa],ur),ia=F([Nn,ft],mr),kn=F([ia,ge,sa],pr);F([ia,ge,sa],(e,a,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var o,c=ie(n,(o=a.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):a?.dataKey!=null?e.map(n=>({value:ie(n,a.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var tt=()=>{},Pn=F([ia,ge,sa,hr,De],fr),An=F([ge,gr,xr,tt,Pn,tt,Te,De],br),Ot=F([ge,Te,ia,kn,vr,De,An],yr),Sn=F([Ot,ge,wr],jr);F([ge,Ot,Sn,De],Nr);function rt(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nt(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?rt(Object(r),!0).forEach(function(n){On(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function On(e,a,r){return(a=$n(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function $n(e){var a=In(e,"string");return typeof a=="symbol"?a:a+""}function In(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var En=(e,a)=>a,ka=F([St,En],(e,a)=>e.filter(r=>r.type==="pie").find(r=>r.id===a)),Cn=[],Pa=(e,a,r)=>r?.length===0?Cn:r,$t=F([ft,ka,Pa],(e,a,r)=>{var{chartData:n}=e;if(a!=null){var i;if(a?.data!=null&&a.data.length>0?i=a.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(o=>nt(nt({},a.presentationProps),o.props))),i!=null)return i}}),Dn=F([$t,ka,Pa],(e,a,r)=>{if(!(e==null||a==null))return e.map((n,i)=>{var o,c=ie(n,a.nameKey,a.name),u;return r!=null&&(o=r[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=a.fill,{value:ea(c,a.dataKey),color:u,payload:n,type:a.legendType}})}),Tn=F([$t,ka,Pa,kr],(e,a,r,n)=>{if(!(a==null||e==null))return js({offset:n,pieSettings:a,displayedData:e,cells:r})}),ba={},st;function _n(){return st||(st=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function a(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=a})(ba)),ba}var va,it;function Rn(){return it||(it=1,va=_n().isPlainObject),va}var Ln=Rn();const Mn=Yt(Ln);function lt(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ot(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?lt(Object(r),!0).forEach(function(n){Kn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kn(e,a,r){return(a=zn(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function zn(e){var a=Bn(e,"string");return typeof a=="symbol"?a:a+""}function Bn(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qe.apply(null,arguments)}var dt=(e,a,r,n,i)=>{var o=r-n,c;return c="M ".concat(e,",").concat(a),c+="L ".concat(e+r,",").concat(a),c+="L ".concat(e+r-o/2,",").concat(a+i),c+="L ".concat(e+r-o/2-n,",").concat(a+i),c+="L ".concat(e,",").concat(a," Z"),c},Wn={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Hn=e=>{var a=Se(e,Wn),{x:r,y:n,upperWidth:i,lowerWidth:o,height:c,className:u}=a,{animationEasing:p,animationDuration:x,animationBegin:j,isUpdateAnimationActive:O}=a,g=l.useRef(null),[h,P]=l.useState(-1),$=l.useRef(i),T=l.useRef(o),I=l.useRef(c),B=l.useRef(r),D=l.useRef(n),E=ja(e,"trapezoid-");if(l.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var U=g.current.getTotalLength();U&&P(U)}catch{}},[]),r!==+r||n!==+n||i!==+i||o!==+o||c!==+c||i===0&&o===0||c===0)return null;var S=Ae("recharts-trapezoid",u);if(!O)return l.createElement("g",null,l.createElement("path",qe({},Xa(a),{className:S,d:dt(r,n,i,o,c)})));var w=$.current,y=T.current,R=I.current,X=B.current,z=D.current,J="0px ".concat(h===-1?1:h,"px"),G="".concat(h,"px 0px"),V=Pr(["strokeDasharray"],x,p);return l.createElement(Na,{animationId:E,key:E,canBegin:h>0,duration:x,easing:p,isActive:O,begin:j},U=>{var ee=Q(w,i,U),xe=Q(y,o,U),ue=Q(R,c,U),se=Q(X,r,U),Ne=Q(z,n,U);g.current&&($.current=ee,T.current=xe,I.current=ue,B.current=se,D.current=Ne);var ke=U>0?{transition:V,strokeDasharray:G}:{strokeDasharray:J};return l.createElement("path",qe({},Xa(a),{className:S,d:dt(se,Ne,ee,xe,ue),ref:g,style:ot(ot({},ke),a.style)}))})},Xn=["option","shapeType","propTransformer","activeClassName","isActive"];function Gn(e,a){if(e==null)return{};var r,n,i=Un(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Un(e,a){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(a.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ct(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ze(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ct(Object(r),!0).forEach(function(n){Fn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fn(e,a,r){return(a=Vn(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Vn(e){var a=Yn(e,"string");return typeof a=="symbol"?a:a+""}function Yn(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function Jn(e,a){return Ze(Ze({},a),e)}function qn(e,a){return e==="symbols"}function ut(e){var{shapeType:a,elementProps:r}=e;switch(a){case"rectangle":return l.createElement(Or,r);case"trapezoid":return l.createElement(Hn,r);case"sector":return l.createElement(Sr,r);case"symbols":if(qn(a))return l.createElement(Ar,r);break;default:return null}}function Zn(e){return l.isValidElement(e)?e.props:e}function Qn(e){var{option:a,shapeType:r,propTransformer:n=Jn,activeClassName:i="recharts-active-shape",isActive:o}=e,c=Gn(e,Xn),u;if(l.isValidElement(a))u=l.cloneElement(a,Ze(Ze({},c),Zn(a)));else if(typeof a=="function")u=a(c);else if(Mn(a)&&typeof a!="boolean"){var p=n(a,c);u=l.createElement(ut,{shapeType:r,elementProps:p})}else{var x=c;u=l.createElement(ut,{shapeType:r,elementProps:x})}return o?l.createElement(ne,{className:i},u):u}var es=(e,a)=>{var r=aa();return(n,i)=>o=>{e?.(n,i,o),r($r({activeIndex:String(i),activeDataKey:a,activeCoordinate:n.tooltipPosition}))}},as=e=>{var a=aa();return(r,n)=>i=>{e?.(r,n,i),a(Ir())}},ts=(e,a)=>{var r=aa();return(n,i)=>o=>{e?.(n,i,o),r(Er({activeIndex:String(i),activeDataKey:a,activeCoordinate:n.tooltipPosition}))}},rs=["onMouseEnter","onClick","onMouseLeave"],ns=["id"],ss=["id"];function Aa(e,a){if(e==null)return{};var r,n,i=is(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function is(e,a){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(a.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mt(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?mt(Object(r),!0).forEach(function(n){ls(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ls(e,a,r){return(a=os(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function os(e){var a=ds(e,"string");return typeof a=="symbol"?a:a+""}function ds(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(null,arguments)}function cs(e){var a=l.useMemo(()=>xt(e.children,na),[e.children]),r=ra(n=>Dn(n,e.id,a));return r==null?null:l.createElement(Dr,{legendPayload:r})}function us(e){var{dataKey:a,nameKey:r,sectors:n,stroke:i,strokeWidth:o,fill:c,name:u,hide:p,tooltipType:x}=e;return{dataDefinedOnItem:n.map(j=>j.tooltipPayload),positions:n.map(j=>j.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:c,dataKey:a,nameKey:r,name:ea(u,a),hide:p,type:x,color:c,unit:""}}}var ms=(e,a)=>e>a?"start":e<a?"end":"middle",ps=(e,a,r)=>typeof a=="function"?Ce(a(e),r,r*.8):Ce(a,r,r*.8),hs=(e,a,r)=>{var{top:n,left:i,width:o,height:c}=a,u=zr(o,c),p=i+Ce(e.cx,o,o/2),x=n+Ce(e.cy,c,c/2),j=Ce(e.innerRadius,u,0),O=ps(r,e.outerRadius,u),g=e.maxRadius||Math.sqrt(o*o+c*c)/2;return{cx:p,cy:x,innerRadius:j,outerRadius:O,maxRadius:g}},fs=(e,a)=>{var r=Fe(a-e),n=Math.min(Math.abs(a-e),360);return r*n};function gs(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var xs=(e,a)=>{if(l.isValidElement(e))return l.cloneElement(e,a);if(typeof e=="function")return e(a);var r=Ae("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return l.createElement(Ve,fe({},a,{type:"linear",className:r}))},bs=(e,a,r)=>{if(l.isValidElement(e))return l.cloneElement(e,a);var n=r;if(typeof e=="function"&&(n=e(a),l.isValidElement(n)))return n;var i=Ae("recharts-pie-label-text",gs(e));return l.createElement(Br,fe({},a,{alignmentBaseline:"middle",className:i}),n)};function vs(e){var{sectors:a,props:r,showLabels:n}=e,{label:i,labelLine:o,dataKey:c}=r;if(!n||!i||!a)return null;var u=ta(r),p=Ga(i),x=Ga(o),j=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,O=a.map((g,h)=>{var P=(g.startAngle+g.endAngle)/2,$=ya(g.cx,g.cy,g.outerRadius+j,P),T=K(K(K(K({},u),g),{},{stroke:"none"},p),{},{index:h,textAnchor:ms($.x,g.cx)},$),I=K(K(K(K({},u),g),{},{fill:"none",stroke:g.fill},x),{},{index:h,points:[ya(g.cx,g.cy,g.outerRadius,P),$],key:"line"});return l.createElement(ne,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(h)},o&&xs(o,I),bs(i,T,ie(g,c)))});return l.createElement(ne,{className:"recharts-pie-labels"},O)}function ys(e){var{sectors:a,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?l.createElement(yt,{label:i}):l.createElement(vs,{sectors:a,props:r,showLabels:n})}function ws(e){var{sectors:a,activeShape:r,inactiveShape:n,allOtherPieProps:i}=e,o=ra(Rr),{onMouseEnter:c,onClick:u,onMouseLeave:p}=i,x=Aa(i,rs),j=es(c,i.dataKey),O=as(p),g=ts(u,i.dataKey);return a==null||a.length===0?null:l.createElement(l.Fragment,null,a.map((h,P)=>{if(h?.startAngle===0&&h?.endAngle===0&&a.length!==1)return null;var $=r&&String(P)===o,T=o?n:null,I=$?r:T,B=K(K({},h),{},{stroke:h.stroke,tabIndex:-1,[Mr]:P,[Lr]:i.dataKey});return l.createElement(ne,fe({key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(P),tabIndex:-1,className:"recharts-pie-sector"},Kr(x,h,P),{onMouseEnter:j(h,P),onMouseLeave:O(h,P),onClick:g(h,P)}),l.createElement(Qn,fe({option:I,isActive:$,shapeType:"sector"},B)))}))}function js(e){var a,{pieSettings:r,displayedData:n,cells:i,offset:o}=e,{cornerRadius:c,startAngle:u,endAngle:p,dataKey:x,nameKey:j,tooltipType:O}=r,g=Math.abs(r.minAngle),h=fs(u,p),P=Math.abs(h),$=n.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,T=n.filter(w=>ie(w,x,0)!==0).length,I=(P>=360?T:T-1)*$,B=P-T*g-I,D=n.reduce((w,y)=>{var R=ie(y,x,0);return w+(he(R)?R:0)},0),E;if(D>0){var S;E=n.map((w,y)=>{var R=ie(w,x,0),X=ie(w,j,y),z=hs(r,o,w),J=(he(R)?R:0)/D,G,V=K(K({},w),i&&i[y]&&i[y].props);y?G=S.endAngle+Fe(h)*$*(R!==0?1:0):G=u;var U=G+Fe(h)*((R!==0?g:0)+J*B),ee=(G+U)/2,xe=(z.innerRadius+z.outerRadius)/2,ue=[{name:X,value:R,payload:V,dataKey:x,type:O}],se=ya(z.cx,z.cy,xe,ee);return S=K(K(K(K({},r.presentationProps),{},{percent:J,cornerRadius:c,name:X,tooltipPayload:ue,midAngle:ee,middleRadius:xe,tooltipPosition:se},V),z),{},{value:R,startAngle:G,endAngle:U,payload:V,paddingAngle:Fe(h)*$}),S})}return E}function Ns(e){var{showLabels:a,sectors:r,children:n}=e,i=l.useMemo(()=>!a||!r?[]:r.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[r,a]);return l.createElement(_r,{value:a?i:void 0},n)}function ks(e){var{props:a,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:u,activeShape:p,inactiveShape:x,onAnimationStart:j,onAnimationEnd:O}=a,g=ja(a,"recharts-pie-"),h=r.current,[P,$]=l.useState(!1),T=l.useCallback(()=>{typeof O=="function"&&O(),$(!1)},[O]),I=l.useCallback(()=>{typeof j=="function"&&j(),$(!0)},[j]);return l.createElement(Ns,{showLabels:!P,sectors:n},l.createElement(Na,{animationId:g,begin:o,duration:c,isActive:i,easing:u,onAnimationStart:I,onAnimationEnd:T,key:g},B=>{var D=[],E=n&&n[0],S=E?.startAngle;return n?.forEach((w,y)=>{var R=h&&h[y],X=y>0?Tr(w,"paddingAngle",0):0;if(R){var z=Q(R.endAngle-R.startAngle,w.endAngle-w.startAngle,B),J=K(K({},w),{},{startAngle:S+X,endAngle:S+z+X});D.push(J),S=J.endAngle}else{var{endAngle:G,startAngle:V}=w,U=Q(0,G-V,B),ee=K(K({},w),{},{startAngle:S+X,endAngle:S+U+X});D.push(ee),S=ee.endAngle}}),r.current=D,l.createElement(ne,null,l.createElement(ws,{sectors:D,activeShape:p,inactiveShape:x,allOtherPieProps:a}))}),l.createElement(ys,{showLabels:!P,sectors:n,props:a}),a.children)}var Ps={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!vt.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function As(e){var{id:a}=e,r=Aa(e,ns),{hide:n,className:i,rootTabIndex:o}=e,c=l.useMemo(()=>xt(e.children,na),[e.children]),u=ra(j=>Tn(j,a,c)),p=l.useRef(null),x=Ae("recharts-pie",i);return n||u==null?(p.current=null,l.createElement(ne,{tabIndex:o,className:x})):l.createElement(l.Fragment,null,l.createElement(bt,{fn:us,args:K(K({},e),{},{sectors:u})}),l.createElement(ne,{tabIndex:o,className:x},l.createElement(ks,{props:K(K({},r),{},{sectors:u}),previousSectorsRef:p})))}function It(e){var a=Se(e,Ps),{id:r}=a,n=Aa(a,ss),i=ta(n);return l.createElement(gt,{id:r,type:"pie"},o=>l.createElement(l.Fragment,null,l.createElement(Cr,{type:"pie",id:o,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:a.maxRadius}),l.createElement(cs,fe({},n,{id:o})),l.createElement(As,fe({},n,{id:o}))))}It.displayName="Pie";var Et=(e,a,r,n)=>wt(e,"xAxis",a,n),Ct=(e,a,r,n)=>jt(e,"xAxis",a,n),Dt=(e,a,r,n)=>wt(e,"yAxis",r,n),Tt=(e,a,r,n)=>jt(e,"yAxis",r,n),Ss=F([Te,Et,Dt,Ct,Tt],(e,a,r,n,i)=>Nt(e,"xAxis")?Fa(a,n,!1):Fa(r,i,!1)),Os=(e,a,r,n,i)=>i,_t=F([Xr,Os],(e,a)=>e.filter(r=>r.type==="area").find(r=>r.id===a)),$s=(e,a,r,n,i)=>{var o,c=_t(e,a,r,n,i);if(c!=null){var u=Te(e),p=Nt(u,"xAxis"),x;if(p?x=Ua(e,"yAxis",r,n):x=Ua(e,"xAxis",a,n),x!=null){var{stackId:j}=c,O=Hr(c);if(!(j==null||O==null)){var g=(o=x[j])===null||o===void 0?void 0:o.stackedData;return g?.find(h=>h.key===O)}}}},Is=F([Te,Et,Dt,Ct,Tt,$s,Wr,Ss,_t],(e,a,r,n,i,o,c,u,p)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:O}=c;if(!(p==null||e!=="horizontal"&&e!=="vertical"||a==null||r==null||n==null||i==null||n.length===0||i.length===0||u==null)){var{data:g}=p,h;if(g&&g.length>0?h=g:h=x?.slice(j,O+1),h!=null){var P=void 0;return qs({layout:e,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataStartIndex:j,areaSettings:p,stackedData:o,displayedData:h,chartBaseValue:P,bandSize:u})}}}),Es=["id"],Cs=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Rt(e,a){if(e==null)return{};var r,n,i=Ds(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ds(e,a){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(a.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function pt(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?pt(Object(r),!0).forEach(function(n){Ts(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ts(e,a,r){return(a=_s(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function _s(e){var a=Rs(e,"string");return typeof a=="symbol"?a:a+""}function Rs(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,a);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(null,arguments)}function Qe(e,a){return e&&e!=="none"?e:a}var Ls=e=>{var{dataKey:a,name:r,stroke:n,fill:i,legendType:o,hide:c}=e;return[{inactive:c,dataKey:a,type:o,color:Qe(n,i),value:ea(r,a),payload:e}]};function Ms(e){var{dataKey:a,data:r,stroke:n,strokeWidth:i,fill:o,name:c,hide:u,unit:p}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:o,dataKey:a,nameKey:void 0,name:ea(c,a),hide:u,type:e.tooltipType,color:Qe(n,o),unit:p}}}var Ks=(e,a)=>{var r;if(l.isValidElement(e))r=l.cloneElement(e,a);else if(typeof e=="function")r=e(a);else{var n=Ae("recharts-area-dot",typeof e!="boolean"?e.className:"");r=l.createElement(nn,ce({},a,{className:n}))}return r};function zs(e,a){return e==null?!1:a?!0:e.length===1}function Bs(e){var{clipPathId:a,points:r,props:n}=e,{needClip:i,dot:o,dataKey:c}=n;if(!zs(r,o))return null;var u=Pt(o),p=ta(n),x=rn(o),j=r.map((g,h)=>{var P=de(de(de({key:"dot-".concat(h),r:3},p),x),{},{index:h,cx:g.x,cy:g.y,dataKey:c,value:g.value,payload:g.payload,points:r});return Ks(o,P)}),O={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(a,")"):void 0};return l.createElement(ne,ce({className:"recharts-area-dots"},O),j)}function Ws(e){var{showLabels:a,children:r,points:n}=e,i=n.map(o=>{var c={x:o.x,y:o.y,width:0,height:0};return de(de({},c),{},{value:o.value,payload:o.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return l.createElement(tn,{value:a?i:null},r)}function ht(e){var{points:a,baseLine:r,needClip:n,clipPathId:i,props:o}=e,{layout:c,type:u,stroke:p,connectNulls:x,isRange:j}=o,{id:O}=o,g=Rt(o,Es),h=ta(g);return l.createElement(l.Fragment,null,a?.length>1&&l.createElement(ne,{clipPath:n?"url(#clipPath-".concat(i,")"):void 0},l.createElement(Ve,ce({},h,{id:O,points:a,connectNulls:x,type:u,baseLine:r,layout:c,stroke:"none",className:"recharts-area-area"})),p!=="none"&&l.createElement(Ve,ce({},h,{className:"recharts-area-curve",layout:c,type:u,connectNulls:x,fill:"none",points:a})),p!=="none"&&j&&l.createElement(Ve,ce({},h,{className:"recharts-area-curve",layout:c,type:u,connectNulls:x,fill:"none",points:r}))),l.createElement(Bs,{points:a,props:g,clipPathId:i}))}function Hs(e){var{alpha:a,baseLine:r,points:n,strokeWidth:i}=e,o=n[0].y,c=n[n.length-1].y;if(!Je(o)||!Je(c))return null;var u=a*Math.abs(o-c),p=Math.max(...n.map(x=>x.x||0));return he(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(x=>x.x||0),p)),he(p)?l.createElement("rect",{x:0,y:o<c?o:o-u,width:p+(i?parseInt("".concat(i),10):1),height:Math.floor(u)}):null}function Xs(e){var{alpha:a,baseLine:r,points:n,strokeWidth:i}=e,o=n[0].x,c=n[n.length-1].x;if(!Je(o)||!Je(c))return null;var u=a*Math.abs(o-c),p=Math.max(...n.map(x=>x.y||0));return he(r)?p=Math.max(r,p):r&&Array.isArray(r)&&r.length&&(p=Math.max(...r.map(x=>x.y||0),p)),he(p)?l.createElement("rect",{x:o<c?o:o-u,y:0,width:u,height:Math.floor(p+(i?parseInt("".concat(i),10):1))}):null}function Gs(e){var{alpha:a,layout:r,points:n,baseLine:i,strokeWidth:o}=e;return r==="vertical"?l.createElement(Hs,{alpha:a,points:n,baseLine:i,strokeWidth:o}):l.createElement(Xs,{alpha:a,points:n,baseLine:i,strokeWidth:o})}function Us(e){var{needClip:a,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:o}=e,{points:c,baseLine:u,isAnimationActive:p,animationBegin:x,animationDuration:j,animationEasing:O,onAnimationStart:g,onAnimationEnd:h}=n,P=ja(n,"recharts-area-"),[$,T]=l.useState(!1),I=!$,B=l.useCallback(()=>{typeof h=="function"&&h(),T(!1)},[h]),D=l.useCallback(()=>{typeof g=="function"&&g(),T(!0)},[g]),E=i.current,S=o.current;return l.createElement(Ws,{showLabels:I,points:c},n.children,l.createElement(Na,{animationId:P,begin:x,duration:j,isActive:p,easing:O,onAnimationEnd:B,onAnimationStart:D,key:P},w=>{if(E){var y=E.length/c.length,R=w===1?c:c.map((z,J)=>{var G=Math.floor(J*y);if(E[G]){var V=E[G];return de(de({},z),{},{x:Q(V.x,z.x,w),y:Q(V.y,z.y,w)})}return z}),X;return he(u)?X=Q(S,u,w):en(u)||an(u)?X=Q(S,0,w):X=u.map((z,J)=>{var G=Math.floor(J*y);if(Array.isArray(S)&&S[G]){var V=S[G];return de(de({},z),{},{x:Q(V.x,z.x,w),y:Q(V.y,z.y,w)})}return z}),w>0&&(i.current=R,o.current=X),l.createElement(ht,{points:R,baseLine:X,needClip:a,clipPathId:r,props:n})}return w>0&&(i.current=c,o.current=u),l.createElement(ne,null,p&&l.createElement("defs",null,l.createElement("clipPath",{id:"animationClipPath-".concat(r)},l.createElement(Gs,{alpha:w,points:c,baseLine:u,layout:n.layout,strokeWidth:n.strokeWidth}))),l.createElement(ne,{clipPath:"url(#animationClipPath-".concat(r,")")},l.createElement(ht,{points:c,baseLine:u,needClip:a,clipPathId:r,props:n})))}),l.createElement(yt,{label:n.label}))}function Fs(e){var{needClip:a,clipPathId:r,props:n}=e,i=l.useRef(null),o=l.useRef();return l.createElement(Us,{needClip:a,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:o})}class Vs extends l.PureComponent{render(){var{hide:a,dot:r,points:n,className:i,top:o,left:c,needClip:u,xAxisId:p,yAxisId:x,width:j,height:O,id:g,baseLine:h}=this.props;if(a)return null;var P=Ae("recharts-area",i),$=g,{r:T,strokeWidth:I}=Zr(r),B=Pt(r),D=T*2+I;return l.createElement(l.Fragment,null,l.createElement(ne,{className:P},u&&l.createElement("defs",null,l.createElement(Qr,{clipPathId:$,xAxisId:p,yAxisId:x}),!B&&l.createElement("clipPath",{id:"clipPath-dots-".concat($)},l.createElement("rect",{x:c-D/2,y:o-D/2,width:j+D,height:O+D}))),l.createElement(Fs,{needClip:u,clipPathId:$,props:this.props})),l.createElement(Va,{points:n,mainColor:Qe(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(h)&&l.createElement(Va,{points:h,mainColor:Qe(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var Lt={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!vt.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Ys(e){var a,r=Se(e,Lt),{activeDot:n,animationBegin:i,animationDuration:o,animationEasing:c,connectNulls:u,dot:p,fill:x,fillOpacity:j,hide:O,isAnimationActive:g,legendType:h,stroke:P,xAxisId:$,yAxisId:T}=r,I=Rt(r,Cs),B=Vr(),D=Yr(),{needClip:E}=Jr($,T),S=kt(),{points:w,isRange:y,baseLine:R}=(a=ra(U=>Is(U,$,T,S,e.id)))!==null&&a!==void 0?a:{},X=qr();if(B!=="horizontal"&&B!=="vertical"||X==null||D!=="AreaChart"&&D!=="ComposedChart")return null;var{height:z,width:J,x:G,y:V}=X;return!w||!w.length?null:l.createElement(Vs,ce({},I,{activeDot:n,animationBegin:i,animationDuration:o,animationEasing:c,baseLine:R,connectNulls:u,dot:p,fill:x,fillOpacity:j,height:z,hide:O,layout:B,isAnimationActive:g,isRange:y,legendType:h,needClip:E,points:w,stroke:P,width:J,left:G,top:V,xAxisId:$,yAxisId:T}))}var Js=(e,a,r,n,i)=>{var o=r??a;if(he(o))return o;var c=e==="horizontal"?i:n,u=c.scale.domain();if(c.type==="number"){var p=Math.max(u[0],u[1]),x=Math.min(u[0],u[1]);return o==="dataMin"?x:o==="dataMax"||p<0?p:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]};function qs(e){var{areaSettings:{connectNulls:a,baseValue:r,dataKey:n},stackedData:i,layout:o,chartBaseValue:c,xAxis:u,yAxis:p,displayedData:x,dataStartIndex:j,xAxisTicks:O,yAxisTicks:g,bandSize:h}=e,P=i&&i.length,$=Js(o,c,r,u,p),T=o==="horizontal",I=!1,B=x.map((E,S)=>{var w;P?w=i[j+S]:(w=ie(E,n),Array.isArray(w)?I=!0:w=[$,w]);var y=w[1]==null||P&&!a&&ie(E,n)==null;return T?{x:Ya({axis:u,ticks:O,bandSize:h,entry:E,index:S}),y:y?null:p.scale(w[1]),value:w,payload:E}:{x:y?null:u.scale(w[1]),y:Ya({axis:p,ticks:g,bandSize:h,entry:E,index:S}),value:w,payload:E}}),D;return P||I?D=B.map(E=>{var S=Array.isArray(E.value)?E.value[0]:null;return T?{x:E.x,y:S!=null&&E.y!=null?p.scale(S):null,payload:E.payload}:{x:S!=null?u.scale(S):null,y:E.y,payload:E.payload}}):D=T?p.scale($):u.scale($),{points:B,baseLine:D,isRange:I}}function Zs(e){var a=Se(e,Lt),r=kt();return l.createElement(gt,{id:a.id,type:"area"},n=>l.createElement(l.Fragment,null,l.createElement(Gr,{legendPayload:Ls(a)}),l.createElement(bt,{fn:Ms,args:a}),l.createElement(Ur,{type:"area",id:n,data:a.data,dataKey:a.dataKey,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,stackId:Fr(a.stackId),hide:a.hide,barSize:void 0,baseValue:a.baseValue,isPanorama:r,connectNulls:a.connectNulls}),l.createElement(Ys,ce({},a,{id:n}))))}var Ye=l.memo(Zs);Ye.displayName="Area";function Qs(e){var a=aa();return l.useEffect(()=>{a(sn(e))},[a,e]),null}var ei=["layout"];function wa(){return wa=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wa.apply(null,arguments)}function ai(e,a){if(e==null)return{};var r,n,i=ti(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ti(e,a){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(a.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ri={top:5,right:5,bottom:5,left:5},ni={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ri,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},si=l.forwardRef(function(a,r){var n,i=Se(a.categoricalChartProps,ni),{layout:o}=i,c=ai(i,ei),{chartName:u,defaultTooltipEventType:p,validateTooltipEventTypes:x,tooltipPayloadSearcher:j}=a,O={chartName:u,defaultTooltipEventType:p,validateTooltipEventTypes:x,tooltipPayloadSearcher:j,eventEmitter:void 0};return l.createElement(ln,{preloadedState:{options:O},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},l.createElement(on,{chartData:i.data}),l.createElement(dn,{layout:o,margin:i.margin}),l.createElement(cn,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),l.createElement(Qs,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),l.createElement(un,wa({},c,{ref:r})))}),ii=["item"],li={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},oi=l.forwardRef((e,a)=>{var r=Se(e,li);return l.createElement(si,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:ii,tooltipPayloadSearcher:At,categoricalChartProps:r,ref:a})}),di=["axis"],ci=l.forwardRef((e,a)=>l.createElement(mn,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:di,tooltipPayloadSearcher:At,categoricalChartProps:e,ref:a}));function Mi({robotStatus:e,maturityData:a,sensorData:r,trendData:n,notifications:i,upcomingSchedules:o,bloks:c=[],blokOptions:u=[],selectedTimeRange:p="24h",selectedBlokId:x="average",thresholds:j={}}){const{auth:O}=Jt().props,{userRole:g}=Qt(),[h,P]=l.useState(!1),[$,T]=l.useState(new Date),[I,B]=l.useState(x),[D,E]=l.useState(p||"24h"),[S,w]=l.useState({}),[y,R]=l.useState(e),[X,z]=l.useState(o||[]),[J,G]=l.useState({}),V=l.useMemo(()=>[{id:1,startX:-10,endX:110,startY:5,duration:15,delay:0,size:"w-4 h-4",rotation:45},{id:2,startX:-10,endX:110,startY:15,duration:18,delay:3,size:"w-5 h-5",rotation:-30},{id:3,startX:-10,endX:110,startY:25,duration:20,delay:6,size:"w-4 h-4",rotation:60},{id:4,startX:-10,endX:110,startY:35,duration:16,delay:2,size:"w-3 h-3",rotation:-45},{id:5,startX:-10,endX:110,startY:45,duration:22,delay:4,size:"w-5 h-5",rotation:30},{id:6,startX:-10,endX:110,startY:55,duration:19,delay:1,size:"w-4 h-4",rotation:-60},{id:7,startX:-10,endX:110,startY:65,duration:17,delay:5,size:"w-3 h-3",rotation:50},{id:8,startX:-10,endX:110,startY:75,duration:21,delay:2.5,size:"w-5 h-5",rotation:-40},{id:9,startX:-10,endX:110,startY:85,duration:14,delay:7,size:"w-4 h-4",rotation:35},{id:10,startX:-10,endX:110,startY:20,duration:23,delay:1.5,size:"w-3 h-3",rotation:-55},{id:11,startX:-10,endX:110,startY:50,duration:16,delay:4.5,size:"w-5 h-5",rotation:40},{id:12,startX:-10,endX:110,startY:80,duration:18,delay:3.5,size:"w-4 h-4",rotation:-25}],[]),U=l.useMemo(()=>[...Array(20)].map((s,d)=>({id:d,size:Math.random()*12+8,left:Math.random()*100,top:Math.random()*100,baseColor:d%3===0?{r:167,g:243,b:208}:d%3===1?{r:191,g:219,b:254}:{r:221,g:214,b:254},duration:Math.random()*10+10,delay:Math.random()*5,movementType:d%4,radius:Math.random()*30+20,speed:Math.random()*.5+.3})),[]),[ee,xe]=l.useState(()=>{try{const s=localStorage.getItem("dashboardTrendData");if(s){const d=JSON.parse(s),A=Date.now()-1440*60*1e3;return d.filter(k=>k.timestamp>=A)}}catch(s){console.error("Error loading trend data from localStorage:",s)}return[]}),[ue,se]=l.useState(!1),[Ne,ke]=l.useState(!1),[la,_e]=l.useState(!1),me=l.useRef([]),Sa=l.useRef(I),[Oe,Oa]=l.useState(()=>{try{const s=localStorage.getItem("dashboardNotifications");if(s){const d=JSON.parse(s),A=Date.now()-10080*60*1e3;return d.filter(k=>k.timestamp>=A)}}catch(s){console.error("Error loading notifications from localStorage:",s)}return[]}),[ae,Re]=l.useState(null),oa=l.useRef({}),$a=l.useRef({});l.useEffect(()=>{Sa.current=I},[I]);const Ia=[{value:"15m",label:"15 Menit",icon:"â±ï¸",minutes:15},{value:"1h",label:"1 Jam",icon:"ðŸ•",hours:1},{value:"4h",label:"4 Jam",icon:"ðŸ•“",hours:4},{value:"24h",label:"1 Hari",icon:"ðŸ“…",hours:24}],$e=[{value:"average",label:"ðŸ“Š Rata-rata Semua Blok",icon:"ðŸ“Š"},...u.map(s=>({...s,icon:"ðŸ“"}))];l.useEffect(()=>{const s=setInterval(()=>{T(new Date)},1e3);return()=>clearInterval(s)},[]),l.useEffect(()=>{const s=d=>{d.target.closest(".dropdown-container")||(ke(!1),_e(!1))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const Le=(s,d)=>{if(!d||d===0)return"normal";const f=j[s]||{};if(s==="suhu_udara"){const A=f.critical_max??40,k=f.warning_max??35;return d>=A?"critical":d>=k?"warning":"normal"}else if(s==="kelembapan_udara"||s==="kelembapan_tanah"){const A=f.critical_min??20,k=f.warning_min??30;return d<=A?"critical":d<=k?"warning":"normal"}return"normal"};l.useEffect(()=>{if(me.current.forEach(k=>{Ee(k.ref,"value",k.callback)}),me.current=[],c.length===0){se(!1);return}const s=c,d={current:s};if(s.length===0){se(!1);return}const f={},A=new Set;return s.forEach(k=>{const Y=k.kebun_id||k.kebun?.id,N=k.code;if(!Y||!N)return;const v=`kebuns/kebun_${Y}/bloks/${N}/sensors`,b=We(Xe,v),C=L=>{const te=L.val();if(te){A.add(N),se(!0),f[N]={},Object.keys(te).forEach(W=>{const pe=te[W];if(pe&&pe.value!==void 0){const q=pe.value,re=Le(W,q);f[N][W]={value:q,unit:pe.unit||(W==="suhu_udara"?"Â°C":"%"),status:re,timestamp:pe.timestamp||Date.now()};const H=`${N}_${W}`,_=oa.current[H];if(_!==void 0&&_!==re&&(re==="warning"||re==="critical")&&(_==="normal"||_==="warning"&&re==="critical")){const M=H,Z=Date.now(),pa=$a.current[M]||0;if(Z-pa>=5e3){const ha=d.current.find(fa=>fa.code===N),ve=ha?`${ha.code} - ${ha.name}`:N,Ft=W==="suhu_udara"?"Suhu Udara":W==="kelembapan_udara"?"Kelembapan Udara":"Kelembapan Tanah",ye=W==="suhu_udara"?"Â°C":"%";let we="",je="âš ï¸",Ke="warning";re==="critical"?W==="suhu_udara"?(we=`Suhu sangat tinggi di ${ve}! Nilai: ${q}${ye} - Berbahaya untuk tanaman!`,je="ðŸ”¥",Ke="critical"):W==="kelembapan_udara"?(we=`Kelembapan udara sangat rendah di ${ve}! Nilai: ${q}${ye} - Kondisi udara terlalu kering!`,je="ðŸŒ¬ï¸",Ke="critical"):W==="kelembapan_tanah"&&(we=`Kelembapan tanah sangat rendah di ${ve}! Nilai: ${q}${ye} - Tanaman membutuhkan penyiraman segera!`,je="ðŸ’§",Ke="critical"):W==="suhu_udara"?(we=`Suhu melebihi batas normal di ${ve}. Nilai: ${q}${ye}`,je="ðŸŒ¡ï¸"):W==="kelembapan_udara"?(we=`Kelembapan udara rendah di ${ve}. Nilai: ${q}${ye} - Kondisi udara kering`,je="ðŸŒ¬ï¸"):W==="kelembapan_tanah"&&(we=`Kelembapan tanah rendah di ${ve}. Nilai: ${q}${ye} - Disarankan melakukan penyiraman`,je="ðŸ’§");const Ma={id:`notif_${Date.now()}_${H}`,type:Ke,icon:je,message:we,sensor:Ft,blok:ve,value:`${q}${ye}`,timestamp:Z,time:new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})};Oa(fa=>{const Vt=fa.filter(ga=>ga.id.split("_").slice(-1)[0]!==H),Ka=[Ma,...Vt].slice(0,50);try{localStorage.setItem("dashboardNotifications",JSON.stringify(Ka))}catch(ga){console.error("Error saving notifications to localStorage:",ga)}return Ka}),Re(Ma),$a.current[M]=Z,setTimeout(()=>{Re(null)},5e3)}oa.current[H]=re}else oa.current[H]=re}}),setTimeout(()=>{const W=Sa.current,pe=W==="average",q={};if(pe)["suhu_udara","kelembapan_udara","kelembapan_tanah"].forEach(H=>{const _=Object.values(f).map(M=>M[H]?.value).filter(M=>M!=null&&M!==0);if(_.length>0){const M=_.reduce((pa,La)=>pa+La,0)/_.length;let Z="normal";H==="suhu_udara"?M>=40?Z="critical":M>=35&&(Z="warning"):(H==="kelembapan_udara"||H==="kelembapan_tanah")&&(M<=20?Z="critical":M<=30&&(Z="warning")),q[H]={value:M,unit:H==="suhu_udara"?"Â°C":"%",status:Z,timestamp:Date.now()}}});else{const H=d.current.find(_=>_.id.toString()===W.toString())?.code;H&&f[H]&&Object.keys(f[H]||{}).forEach(_=>{const M=f[H][_];if(M&&M.value!==void 0){let Z="normal";_==="suhu_udara"?M.value>=40?Z="critical":M.value>=35&&(Z="warning"):(_==="kelembapan_udara"||_==="kelembapan_tanah")&&(M.value<=20?Z="critical":M.value<=30&&(Z="warning")),q[_]={...M,status:Z}}})}Object.keys(q).length>0&&w(q)},100);const le=new Date,Ie=le.getTime(),ma={time:le.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),timestamp:Ie,blokId:N,suhu:f[N]?.suhu_udara?.value??0,kelembapan:f[N]?.kelembapan_udara?.value??0,kelembapanTanah:f[N]?.kelembapan_tanah?.value??0};xe(W=>{const q=[...W.filter(_=>!(_.blokId===N&&Math.abs(_.timestamp-Ie)<5e3)),ma],re=Ie-1440*60*1e3,H=q.filter(_=>_.timestamp>=re).sort((_,M)=>_.timestamp-M.timestamp);try{localStorage.setItem("dashboardTrendData",JSON.stringify(H))}catch(_){console.error("Error saving trend data to localStorage:",_)}return H})}else A.delete(N),A.size===0&&se(!1)};He(b,C,L=>{console.error("Firebase listener error:",L),A.delete(N),A.size===0&&se(!1)}),me.current.push({ref:b,callback:C})}),()=>{me.current.forEach(k=>{Ee(k.ref,"value",k.callback)}),me.current=[]}},[I,c,D,j]);const Ea=s=>({deteksi:"ðŸ” Deteksi Kematangan",penyiraman:"ðŸ’§ Penyiraman",pemupukan:"ðŸŒ± Pemupukan",kombinasi:"âš¡ Kombinasi"})[s]||s,da=s=>{if(!s)return{status:null,progress:null};const d=s.match(/in_progress[_-]?(\d+)%?/i);return d?{status:"in_progress",progress:parseInt(d[1])}:s.toLowerCase().includes("completed")||s.toLowerCase().includes("done")?{status:"completed",progress:100}:{status:s,progress:null}},Mt=s=>s?new Date(s).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ca=s=>{const d={pending:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/30",in_progress:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",paused:"bg-gradient-to-r from-orange-400 to-orange-500 text-white border-orange-300 shadow-lg shadow-orange-400/30",completed:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",done:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",cancelled:"bg-gradient-to-r from-gray-400 to-gray-500 text-white border-gray-300",failed:"bg-gradient-to-r from-red-400 to-red-500 text-white border-red-300 shadow-lg shadow-red-400/30"};if(d[s])return d[s];switch(s){case"aktif":case"active":return"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30";case"idle":return"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/30";case"charging":return"bg-gradient-to-r from-yellow-400 to-amber-500 text-white border-yellow-300 shadow-lg shadow-yellow-400/30";case"offline":return"bg-gradient-to-r from-red-400 to-red-500 text-white border-red-300 shadow-lg shadow-red-400/30";default:return"bg-gradient-to-r from-gray-400 to-gray-500 text-white border-gray-300"}},Da=s=>({active:"AKTIF",aktif:"AKTIF",idle:"ONLINE",charging:"CHARGING",offline:"OFFLINE",in_progress:"BERJALAN",paused:"DIJEDA",pending:"TERJADWAL",completed:"SELESAI",done:"SELESAI",cancelled:"DIBATALKAN",failed:"GAGAL"})[s]||s.toUpperCase(),Kt=s=>{if(s==="Tidak diketahui")return"Tidak diketahui";if(typeof s=="object"){if(s.blok_id||s.blok_code)return s.blok_id||s.blok_code||"Tidak diketahui";if(s.name)return s.name}return s};l.useEffect(()=>{const s=We(Xe,"robot/status"),d=N=>{const v=N.val();v&&R(b=>({...b,nama:v.name||b.nama||"MOV Bot Alpha",status:v.current_state||v.status||"offline",battery:v.battery_level||v.battery||0,lokasi:Kt(v.current_location||v.location||"Tidak diketahui")}))};He(s,d),me.current.push({ref:s,callback:d});const f=We(Xe,"robot/active_mission"),A=N=>{const v=N.val();R(v?b=>({...b,misi:v.mission_type?Ea(v.mission_type):null,progress:v.progress_percentage||0}):b=>({...b,misi:null,progress:0}))};He(f,A),me.current.push({ref:f,callback:A});const k=We(Xe,"robot/schedules"),Y=N=>{const v=N.val();G(v||{}),v&&z(b=>b.map(L=>{const te=`schedule_${L.id}`,le=v[te];if(le){const Ie=le.status||L.status,{status:ma,progress:W}=da(Ie);return{...L,status:ma||le.status||L.status,progress_percentage:W!==null?W:le.progress_percentage??L.progress_percentage}}return L}).filter(L=>L.status!=="cancelled"))};return He(k,Y),me.current.push({ref:k,callback:Y}),()=>{Ee(s,"value",d),Ee(f,"value",A),Ee(k,"value",Y)}},[]);const ca=s=>{switch(s){case"critical":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";default:return"bg-green-500 text-white"}},Pe=Object.keys(S).length>0?{suhuUdara:S.suhu_udara?.value??0,kelembabanUdara:S.kelembapan_udara?.value??0,kelembabanTanah:S.kelembapan_tanah?.value??0}:{suhuUdara:r.suhuUdara??0,kelembabanUdara:r.kelembabanUdara??0,kelembabanTanah:r.kelembabanTanah??0},ua=(()=>{if(ee.length===0)return[];const s=Date.now(),d=Ia.find(v=>v.value===D);let f;if(D==="15m")f=s-900*1e3;else{const v=d?.hours||24;f=s-v*60*60*1e3}const A=ee.filter(v=>v.timestamp>=f);let k=[];if(I==="average"){const v={};A.forEach(b=>{v[b.timestamp]||(v[b.timestamp]={suhu:[],kelembapan:[],kelembapanTanah:[],timestamp:b.timestamp,time:b.time}),v[b.timestamp].suhu.push(b.suhu),v[b.timestamp].kelembapan.push(b.kelembapan),v[b.timestamp].kelembapanTanah.push(b.kelembapanTanah)}),k=Object.values(v).map(b=>({time:b.time,timestamp:b.timestamp,suhu:b.suhu.length>0?b.suhu.reduce((C,L)=>C+L,0)/b.suhu.length:0,kelembapan:b.kelembapan.length>0?b.kelembapan.reduce((C,L)=>C+L,0)/b.kelembapan.length:0,kelembapanTanah:b.kelembapanTanah.length>0?b.kelembapanTanah.reduce((C,L)=>C+L,0)/b.kelembapanTanah.length:0}))}else{const v=c.find(b=>b.id.toString()===I.toString())?.code||null;k=A.filter(b=>b.blokId===v)}if(k.length===0)return[];let Y=[];const N={};return k.forEach(v=>{const b=new Date(v.timestamp);let C;if(D==="15m")C=`${String(b.getHours()).padStart(2,"0")}:${String(b.getMinutes()).padStart(2,"0")}`;else if(D==="1h"){const L=b.getMinutes(),te=Math.floor(L/5)*5;C=`${String(b.getHours()).padStart(2,"0")}:${String(te).padStart(2,"0")}`}else if(D==="4h"){const L=b.getMinutes(),te=Math.floor(L/15)*15;C=`${String(b.getHours()).padStart(2,"0")}:${String(te).padStart(2,"0")}`}else C=`${String(b.getHours()).padStart(2,"0")}:00`;N[C]||(N[C]={suhu:[],kelembapan:[],kelembapanTanah:[],time:C,timestamp:v.timestamp}),N[C].suhu.push(v.suhu),N[C].kelembapan.push(v.kelembapan),N[C].kelembapanTanah.push(v.kelembapanTanah)}),Y=Object.values(N).map(v=>({time:v.time,suhu:v.suhu.length>0?Math.round(v.suhu.reduce((b,C)=>b+C,0)/v.suhu.length*10)/10:0,kelembapan:v.kelembapan.length>0?Math.round(v.kelembapan.reduce((b,C)=>b+C,0)/v.kelembapan.length*10)/10:0,kelembapanTanah:v.kelembapanTanah.length>0?Math.round(v.kelembapanTanah.reduce((b,C)=>b+C,0)/v.kelembapanTanah.length*10)/10:0})).sort((v,b)=>{const[C,L]=v.time.split(":").map(Number),[te,le]=b.time.split(":").map(Number);return C!==te?C-te:(L||0)-(le||0)}),Y})(),Ta=()=>I==="average"?"ðŸ“Š Rata-rata Semua Blok":$e.find(d=>d.value.toString()===I.toString())?.label||"Pilih Blok",zt=s=>{E(s)},_a=s=>{B(s)},Me=s=>s>60?"text-green-500":s>30?"text-yellow-500":"text-red-500",Bt=s=>s>60?"from-green-400 to-emerald-500":s>30?"from-yellow-400 to-amber-500":"from-red-400 to-red-500",Wt=s=>{switch(s){case"k-petani":return"K-Petani";case"petani":return"Petani";case"guest":return"Guest";default:return s}},Ht=s=>{switch(s){case"k-petani":return"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30";case"petani":return"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/30";case"guest":return"bg-gradient-to-r from-gray-400 to-gray-500 text-white border-gray-300 shadow-lg shadow-gray-400/30";default:return"bg-gradient-to-r from-gray-400 to-gray-500 text-white border-gray-300"}},Xt=()=>{P(!0),setTimeout(()=>{P(!1)},1e3)},Gt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},be={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:[.4,0,.2,1]}}},Ra=s=>s.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),Ut=s=>s.toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short",year:"numeric"});return t.jsxs(Zt,{children:[t.jsx(qt,{title:"Dashboard"}),t.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[t.jsxs("div",{className:"fixed inset-0 -z-10 bg-gradient-to-br from-green-100 via-sky-100 to-green-50",children:[t.jsx(m.div,{className:"absolute inset-0",animate:{background:["radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.08) 0%, transparent 50%)","radial-gradient(circle at 80% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%)","radial-gradient(circle at 50% 20%, rgba(139, 92, 246, 0.08) 0%, transparent 50%)","radial-gradient(circle at 20% 50%, rgba(16, 185, 129, 0.08) 0%, transparent 50%)"]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),t.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`
                                linear-gradient(rgba(16, 185, 129, 0.1) 1px, transparent 1px),
                                linear-gradient(90deg, rgba(16, 185, 129, 0.1) 1px, transparent 1px)
                            `,backgroundSize:"50px 50px"}}),t.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:V.map(s=>t.jsx(m.div,{className:`absolute ${s.size}`,initial:{left:`${s.startX}%`,top:`${s.startY}%`,rotate:s.rotation,opacity:0},animate:{left:`${s.endX}%`,top:`${s.startY+15}%`,rotate:[s.rotation,s.rotation+360,s.rotation+720],opacity:[0,.7,.5,.3,0],y:[0,-20,-10,0,10,20]},transition:{duration:s.duration,repeat:1/0,delay:s.delay,ease:"linear"},children:t.jsx(m.div,{className:"w-full h-full",animate:{filter:["hue-rotate(0deg) saturate(1) brightness(1)","hue-rotate(20deg) saturate(1.15) brightness(1.05)","hue-rotate(40deg) saturate(1.3) brightness(1.1)","hue-rotate(20deg) saturate(1.15) brightness(1.05)","hue-rotate(0deg) saturate(1) brightness(1)"]},transition:{duration:12+s.id*.8,repeat:1/0,ease:"easeInOut",delay:s.delay*.4},children:t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-full h-full",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:`leaf-gradient-dashboard-${s.id}`,x1:"4",y1:"3",x2:"20",y2:"20",children:[t.jsx("stop",{offset:"0%",stopColor:"#4ade80"}),t.jsx("stop",{offset:"50%",stopColor:"#22c55e"}),t.jsx("stop",{offset:"100%",stopColor:"#16a34a"})]})}),t.jsx("path",{d:"M12 3C8 3 4 7 4 12C4 14 5 16 6 17C7 18 9 19 11 19.5C11.5 19.7 12 20 12 20C12 20 12.5 19.7 13 19.5C15 19 17 18 18 17C19 16 20 14 20 12C20 7 16 3 12 3Z",fill:`url(#leaf-gradient-dashboard-${s.id})`,className:"drop-shadow-md"}),t.jsx("path",{d:"M12 3C12 3 12 12 12 20",stroke:"#2d5016",strokeWidth:"0.5",strokeLinecap:"round"})]})})},s.id))}),U.map(s=>{const d=[`rgba(${s.baseColor.r}, ${s.baseColor.g}, ${s.baseColor.b}, 0.4)`,`rgba(${s.baseColor.r+20}, ${s.baseColor.g+20}, ${s.baseColor.b+20}, 0.4)`,`rgba(${s.baseColor.r-20}, ${s.baseColor.g-20}, ${s.baseColor.b-20}, 0.4)`,`rgba(${s.baseColor.r}, ${s.baseColor.g}, ${s.baseColor.b}, 0.4)`];let f={};s.movementType===0?f={x:[`calc(${s.left}% + ${s.radius*Math.cos(0)}px)`,`calc(${s.left}% + ${s.radius*Math.cos(Math.PI/2)}px)`,`calc(${s.left}% + ${s.radius*Math.cos(Math.PI)}px)`,`calc(${s.left}% + ${s.radius*Math.cos(3*Math.PI/2)}px)`,`calc(${s.left}% + ${s.radius*Math.cos(2*Math.PI)}px)`],y:[`calc(${s.top}% + ${s.radius*Math.sin(0)}px)`,`calc(${s.top}% + ${s.radius*Math.sin(Math.PI/2)}px)`,`calc(${s.top}% + ${s.radius*Math.sin(Math.PI)}px)`,`calc(${s.top}% + ${s.radius*Math.sin(3*Math.PI/2)}px)`,`calc(${s.top}% + ${s.radius*Math.sin(2*Math.PI)}px)`]}:s.movementType===1?f={x:[`${s.left}%`,`${s.left+s.radius*.5}%`,`${s.left}%`,`${s.left-s.radius*.5}%`,`${s.left}%`],y:[`${s.top}%`,`${s.top-s.radius*.3}%`,`${s.top}%`,`${s.top+s.radius*.3}%`,`${s.top}%`]}:s.movementType===2?f={x:[`${s.left}%`,`${s.left+s.radius*.4}%`,`${s.left}%`,`${s.left-s.radius*.4}%`,`${s.left}%`],y:[`${s.top}%`,`${s.top-s.radius*.6}%`,`${s.top-s.radius*.3}%`,`${s.top-s.radius*.6}%`,`${s.top}%`]}:f={x:[`${s.left}%`,`${s.left+s.radius*.3}%`,`${s.left}%`,`${s.left-s.radius*.3}%`,`${s.left}%`],y:[`${s.top}%`,`${s.top-s.radius*.4}%`,`${s.top}%`,`${s.top+s.radius*.4}%`,`${s.top}%`]};const A=`rgba(${s.baseColor.r}, ${s.baseColor.g}, ${s.baseColor.b}, 0.4)`;return t.jsx(m.div,{className:"absolute rounded-full",style:{width:s.size+"px",height:s.size+"px",left:s.left+"%",top:s.top+"%",boxShadow:`0 0 ${s.size*2}px ${A}, 0 0 ${s.size*4}px ${A}40`},animate:{...f,backgroundColor:d,opacity:[.3,.6,.4,.6,.3],scale:[1,1.2,1.1,1.3,1],rotate:[0,180,360],boxShadow:[`0 0 ${s.size*2}px ${d[0]}, 0 0 ${s.size*4}px ${d[0]}40`,`0 0 ${s.size*2.5}px ${d[1]}, 0 0 ${s.size*5}px ${d[1]}40`,`0 0 ${s.size*2.2}px ${d[2]}, 0 0 ${s.size*4.5}px ${d[2]}40`,`0 0 ${s.size*2.5}px ${d[3]}, 0 0 ${s.size*5}px ${d[3]}40`,`0 0 ${s.size*2}px ${d[0]}, 0 0 ${s.size*4}px ${d[0]}40`]},transition:{duration:s.duration*s.speed,repeat:1/0,ease:"easeInOut",delay:s.delay}},s.id)}),t.jsx(m.div,{className:"absolute top-0 -left-1/4 w-96 h-96 rounded-full blur-3xl opacity-20",style:{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(20, 184, 166, 0.2))"},animate:{x:[0,100,0],y:[0,50,0],scale:[1,1.2,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),t.jsx(m.div,{className:"absolute bottom-0 -right-1/4 w-96 h-96 rounded-full blur-3xl opacity-20",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(99, 102, 241, 0.2))"},animate:{x:[0,-100,0],y:[0,-50,0],scale:[1,1.2,1]},transition:{duration:30,repeat:1/0,ease:"easeInOut",delay:2}})]}),t.jsxs("div",{className:"relative z-10 p-4 md:p-6 space-y-4 md:space-y-6 max-w-7xl mx-auto",children:[t.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[t.jsx("div",{className:"space-y-1",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(er,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Dashboard"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ringkasan Sistem MOV"})]})]})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/50 backdrop-blur-lg border border-green-200/40 rounded-2xl shadow-xl px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx(m.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(ar,{className:"w-5 h-5 text-white"})}),t.jsx(m.span,{initial:{scale:.8},animate:{scale:1},transition:{delay:.4},className:`text-[10px] font-bold px-2.5 py-0.5 rounded-full ${Ht(g)} border-2`,children:Wt(g)})]}),t.jsx("div",{className:"w-px h-12 bg-gradient-to-b from-transparent via-green-200 to-transparent"}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs(m.div,{initial:{scale:1.1,opacity:.5},animate:{scale:1,opacity:1},transition:{duration:.3},className:"flex items-center gap-2",children:[t.jsx(m.div,{animate:{rotate:[0,360]},transition:{duration:60,repeat:1/0,ease:"linear"},children:t.jsx(Ha,{className:"w-4 h-4 text-green-600"})}),t.jsx("p",{className:"text-lg font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent font-mono",children:Ra($)})]},Ra($)),t.jsxs(m.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center gap-1.5",children:[t.jsx(Ge,{className:"w-3.5 h-3.5 text-gray-400"}),t.jsx("p",{className:"text-xs font-medium text-gray-600",children:Ut($)})]})]})]})}),t.jsx(m.button,{whileHover:{scale:1.05,rotate:90},whileTap:{scale:.95},onClick:Xt,className:"p-2.5 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg shadow-green-500/30",children:t.jsx(tr,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]})]}),t.jsxs(m.div,{variants:Gt,initial:"hidden",animate:"visible",className:"space-y-4 md:space-y-6",children:[t.jsx(m.div,{variants:be,children:t.jsxs(oe,{className:"p-5 md:p-7 bg-gradient-to-br from-blue-50/60 via-cyan-50/50 to-blue-100/60 border-2 border-blue-200/50 shadow-xl overflow-hidden relative group backdrop-blur-lg",children:[t.jsx("div",{className:"absolute inset-0 opacity-30",children:t.jsx(m.div,{animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:15,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 bg-gradient-to-br from-blue-200/40 via-cyan-200/40 to-teal-200/40",style:{backgroundSize:"200% 200%"}})}),t.jsx("div",{className:"absolute inset-0 opacity-5",children:t.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(rgba(59, 130, 246, 0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.08) 1px, transparent 1px)",backgroundSize:"30px 30px"}})}),y.status==="idle"&&t.jsx(m.div,{animate:{opacity:[.2,.4,.2],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 right-0 w-32 h-32 bg-blue-300/20 rounded-full blur-3xl"}),t.jsx(m.div,{animate:{x:["-100%","200%"]},transition:{duration:4,repeat:1/0,repeatDelay:3,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent skew-x-12"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-start justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(m.div,{animate:{scale:y.status==="aktif"||y.status==="active"?[1,1.15,1]:y.status==="idle"?[1,1.08,1]:1,rotate:y.status==="aktif"||y.status==="active"?[0,5,-5,0]:0},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"relative",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 via-cyan-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-xl shadow-blue-500/40 border-2 border-white/40",children:t.jsx(rr,{className:"w-8 h-8 text-white drop-shadow-lg"})}),y.status==="idle"&&t.jsx(m.div,{animate:{scale:[1,1.5,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0,ease:"easeOut"},className:"absolute inset-0 rounded-2xl border-2 border-cyan-400/60"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl md:text-2xl font-extrabold text-gray-800 mb-1 drop-shadow-sm",children:y.nama||"MOV Bot Alpha"}),t.jsx("p",{className:"text-xs md:text-sm text-blue-600 font-medium",children:"Status Robot"})]})]}),t.jsx(m.span,{whileHover:{scale:1.1,rotate:2},whileTap:{scale:.95},className:`px-4 py-2 text-sm font-extrabold rounded-full border-2 shadow-xl backdrop-blur-sm ${Ca(y.status)}`,children:Da(y.status)})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs(m.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-4 rounded-2xl border border-blue-100/60 shadow-lg overflow-hidden group",children:[t.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${Me(y.battery).replace("text-","bg-").replace("-500","-500/15")} blur-xl`}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${Me(y.battery).replace("text-","bg-")} bg-opacity-15`,children:t.jsx(nr,{className:`w-5 h-5 ${Me(y.battery)}`})}),t.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Baterai"})]}),t.jsxs("div",{className:"flex items-baseline gap-1.5 mb-3",children:[t.jsx("p",{className:`text-3xl md:text-4xl font-black ${Me(y.battery)} drop-shadow-sm`,children:y.battery}),t.jsx("span",{className:"text-sm text-gray-500 font-bold",children:"%"})]}),t.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-3 overflow-hidden",children:t.jsx(m.div,{initial:{width:0},animate:{width:`${y.battery}%`},transition:{duration:1.5,ease:"easeOut"},className:`h-full bg-gradient-to-r ${Bt(y.battery)} rounded-full shadow-md relative`,children:t.jsx(m.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent"})},y.battery)})]})]}),t.jsxs(m.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-4 rounded-2xl border border-blue-100/60 shadow-lg overflow-hidden group",children:[t.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-400/15 blur-xl"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-blue-500/15",children:t.jsx(ir,{className:"w-5 h-5 text-blue-500"})}),t.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Lokasi"})]}),t.jsx("p",{className:"text-lg md:text-xl font-extrabold text-gray-800 leading-tight drop-shadow-sm",children:y.lokasi||"Tidak diketahui"})]})]})]}),(y.status==="aktif"||y.status==="active")&&y.misi&&t.jsxs(m.div,{initial:{opacity:0,height:0,y:-20},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0},transition:{duration:.5,ease:"easeOut"},className:"relative bg-gradient-to-r from-green-100/80 to-emerald-100/80 backdrop-blur-md p-4 rounded-2xl border border-green-300/50 shadow-lg overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("span",{className:"text-sm font-bold text-green-700 uppercase tracking-wide",children:y.misi}),t.jsxs("span",{className:"text-sm font-extrabold text-green-600 bg-green-200/50 px-3 py-1 rounded-full",children:[y.progress,"%"]})]}),t.jsx("div",{className:"relative w-full bg-white/60 rounded-full h-3 overflow-hidden",children:t.jsx(m.div,{initial:{width:0},animate:{width:`${y.progress}%`},transition:{duration:1.5,ease:"easeOut"},className:"h-full bg-gradient-to-r from-green-400 to-emerald-400 rounded-full shadow-md relative",children:t.jsx(m.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent"})},y.progress)})]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[t.jsx(m.div,{variants:be,children:t.jsxs(oe,{className:"p-4 md:p-6 bg-white/50 backdrop-blur-lg border-2 border-purple-200/50 shadow-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(wn,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Kematangan Buah"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Rata-rata per Blok"})]})]}),t.jsx(Ja,{width:"100%",height:200,children:t.jsxs(oi,{children:[t.jsx(It,{data:a,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:3,dataKey:"value",label:s=>`${s.value}%`,labelStyle:{fontSize:"12px",fontWeight:"bold"},children:a.map((s,d)=>t.jsx(na,{fill:s.color},`cell-${d}`))}),t.jsx(qa,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px"}})]})}),t.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:a.map((s,d)=>t.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.1},className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:s.color}}),t.jsx("span",{className:"text-xs font-medium text-gray-700",children:s.name})]},s.name))})]})}),t.jsxs(m.div,{variants:be,className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h3",{className:"text-sm font-bold text-gray-700 flex items-center gap-2",children:[t.jsx(sr,{className:"w-4 h-4 text-yellow-500"}),"Kondisi Lingkungan"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[ue&&t.jsxs(m.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"flex items-center gap-1 text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-full border border-green-200",children:[t.jsx(Ba,{className:"w-3 h-3"}),t.jsx("span",{children:"Online"})]}),$e.length>0&&t.jsxs("div",{className:"relative dropdown-container",children:[t.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{ke(!Ne),_e(!1)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl shadow-lg hover:shadow-xl transition-all font-medium text-xs min-w-[180px] justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qa,{className:"w-4 h-4"}),t.jsx("span",{className:"truncate",children:Ta()})]}),t.jsx(m.div,{animate:{rotate:Ne?180:0},transition:{duration:.2},children:t.jsx(Za,{className:"w-4 h-4"})})]}),t.jsx(Ue,{children:Ne&&t.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-2xl border-2 border-gray-100 overflow-hidden z-50",children:t.jsx("div",{className:"max-h-60 overflow-y-auto",children:$e.map((s,d)=>t.jsxs(m.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},whileHover:{backgroundColor:"#f3f4f6"},onClick:()=>{_a(s.value),ke(!1)},className:`w-full text-left px-4 py-3 flex items-center gap-3 transition-all ${I===s.value?"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500":"hover:bg-gray-50"}`,children:[t.jsx("span",{className:"text-lg",children:s.icon}),t.jsx("span",{className:"text-sm font-medium text-gray-700 flex-1",children:s.label}),I===s.value&&t.jsx(et,{className:"w-4 h-4 text-green-500"})]},s.value))})})})]})]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{const s=Le("suhu_udara",Pe.suhuUdara),d=Le("kelembapan_udara",Pe.kelembabanUdara),f=Le("kelembapan_tanah",Pe.kelembabanTanah);return t.jsxs(t.Fragment,{children:[t.jsx(m.div,{whileHover:{scale:1.05,y:-5},className:"relative",children:t.jsxs(oe,{className:`p-4 bg-gradient-to-br from-orange-50/60 via-orange-100/50 to-amber-50/60 backdrop-blur-lg border-2 ${s==="critical"?"border-red-300/60":s==="warning"?"border-yellow-300/60":"border-orange-200/40"} shadow-lg overflow-hidden`,children:[t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-orange-200/20 rounded-full -mr-10 -mt-10"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(m.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0},children:t.jsx(pn,{className:"w-6 h-6 text-orange-600"})}),s!=="normal"&&t.jsx(xa,{className:`w-4 h-4 ${s==="critical"?"text-red-600":"text-yellow-600"}`})]}),t.jsx("p",{className:"text-xs font-medium text-gray-700 text-center mb-1",children:"Suhu"}),t.jsxs("p",{className:"text-xl font-bold text-orange-700 mb-1",children:[Pe.suhuUdara?.toFixed(1)||"0.0","Â°C"]}),t.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${ca(s)}`,children:s==="critical"?"Kritis":s==="warning"?"Peringatan":"Normal"})]})]})}),t.jsx(m.div,{whileHover:{scale:1.05,y:-5},className:"relative",children:t.jsxs(oe,{className:`p-4 bg-gradient-to-br from-blue-50/60 via-blue-100/50 to-cyan-50/60 backdrop-blur-lg border-2 ${d==="critical"?"border-red-300/60":d==="warning"?"border-yellow-300/60":"border-blue-200/40"} shadow-lg overflow-hidden`,children:[t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-200/20 rounded-full -mr-10 -mt-10"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(m.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:t.jsx(bn,{className:"w-6 h-6 text-blue-600"})}),d!=="normal"&&t.jsx(xa,{className:`w-4 h-4 ${d==="critical"?"text-red-600":"text-yellow-600"}`})]}),t.jsx("p",{className:"text-xs font-medium text-gray-700 text-center mb-1",children:"Kelemb. Udara"}),t.jsxs("p",{className:"text-xl font-bold text-blue-700 mb-1",children:[Pe.kelembabanUdara?.toFixed(1)||"0.0","%"]}),t.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${ca(d)}`,children:d==="critical"?"Kritis":d==="warning"?"Peringatan":"Normal"})]})]})}),t.jsx(m.div,{whileHover:{scale:1.05,y:-5},className:"relative",children:t.jsxs(oe,{className:`p-4 bg-gradient-to-br from-green-50/60 via-emerald-100/50 to-green-50/60 backdrop-blur-lg border-2 ${f==="critical"?"border-red-300/60":f==="warning"?"border-yellow-300/60":"border-green-200/40"} shadow-lg overflow-hidden`,children:[t.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-green-200/20 rounded-full -mr-10 -mt-10"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(m.div,{animate:{rotate:[0,-10,10,0]},transition:{duration:2.5,repeat:1/0},children:t.jsx(vn,{className:"w-6 h-6 text-green-600"})}),f!=="normal"&&t.jsx(xa,{className:`w-4 h-4 ${f==="critical"?"text-red-600":"text-yellow-600"}`})]}),t.jsx("p",{className:"text-xs font-medium text-gray-700 text-center mb-1",children:"Kelemb. Tanah"}),t.jsxs("p",{className:"text-xl font-bold text-green-700 mb-1",children:[Pe.kelembabanTanah?.toFixed(1)||"0.0","%"]}),t.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${ca(f)}`,children:f==="critical"?"Kritis":f==="warning"?"Peringatan":"Normal"})]})]})})]})})()})]})]}),t.jsx(m.div,{variants:be,children:t.jsxs(oe,{className:"p-4 md:p-6 bg-gradient-to-br from-white via-blue-50/30 to-cyan-50/30 backdrop-blur-xl border-2 border-blue-200/60 shadow-2xl overflow-hidden relative",children:[t.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gradient-to-br from-blue-400/20 via-cyan-400/20 to-transparent rounded-full blur-3xl -mr-20 -mt-20"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-blue-400/20 via-cyan-400/20 to-transparent rounded-full blur-3xl -ml-16 -mb-16"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m.div,{animate:{rotate:[0,5,-5,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-blue-500 via-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-xl shadow-blue-500/30",children:t.jsx(Wa,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-extrabold text-gray-800",children:"Notifikasi Real-time"}),t.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Peringatan sensor & sistem"})]})]}),Oe.length>0&&t.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg",children:t.jsx("span",{className:"text-xs font-bold text-white",children:Oe.length})})]}),(()=>{const s=(i||[]).filter(f=>!Oe.some(A=>A.blok===f.blok&&A.sensor===f.sensor&&Math.abs(A.timestamp-(f.timestamp||0))<6e4)),d=[...Oe,...s];return d.length>0?t.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:t.jsx(Ue,{mode:"popLayout",children:d.map((f,A)=>{const k=f.type==="critical",Y=f.type==="warning";return t.jsx(m.div,{layout:!0,initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{duration:.3,delay:A<3?A*.1:0},whileHover:{scale:1.02,x:5},className:`p-4 rounded-xl border-2 backdrop-blur-sm shadow-lg hover:shadow-xl transition-all cursor-pointer ${k?"bg-gradient-to-r from-red-50 via-orange-50 to-red-50 border-red-300/70 shadow-red-200/50":Y?"bg-gradient-to-r from-yellow-50 via-amber-50 to-yellow-50 border-yellow-300/70 shadow-yellow-200/50":f.type==="success"?"bg-gradient-to-r from-green-50 via-emerald-50 to-green-50 border-green-300/70 shadow-green-200/50":"bg-gradient-to-r from-blue-50 via-cyan-50 to-blue-50 border-blue-300/70 shadow-blue-200/50"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(m.div,{animate:k?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},transition:{duration:2,repeat:1/0},className:"text-2xl flex-shrink-0",children:f.icon||"ðŸ””"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[t.jsx("p",{className:`text-sm font-bold ${k?"text-red-800":Y?"text-yellow-800":"text-gray-800"}`,children:f.message||f.sensor}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[k&&t.jsx(m.div,{animate:{scale:[1,1.3,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 bg-red-500 rounded-full"}),Oe.some(N=>N.id===f.id)&&t.jsx("button",{onClick:N=>{N.stopPropagation(),Oa(v=>{const b=v.filter(C=>C.id!==f.id);try{localStorage.setItem("dashboardNotifications",JSON.stringify(b))}catch(C){console.error("Error saving notifications to localStorage:",C)}return b})},className:"p-1 hover:bg-red-100 rounded-full transition-colors group",title:"Hapus notifikasi",children:t.jsx(za,{className:"w-4 h-4 text-gray-400 group-hover:text-red-600 transition-colors"})})]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.blok&&t.jsxs("span",{className:"text-xs px-2 py-0.5 bg-white/60 rounded-full font-medium text-gray-700 border border-gray-200",children:["ðŸ“ ",f.blok]}),f.value&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-bold ${k?"bg-red-100 text-red-700":Y?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:f.value}),t.jsx("span",{className:"text-xs text-gray-500 font-medium",children:f.time||"Baru saja"})]})]})]})},f.id)})})}):t.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-12",children:[t.jsx(m.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:t.jsx(Wa,{className:"w-16 h-16 text-gray-300 mx-auto mb-3"})}),t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tidak ada notifikasi"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Semua sensor dalam kondisi normal"})]})})()]})]})}),t.jsx(Ue,{children:ae&&t.jsx(m.div,{initial:{opacity:0,x:400,scale:.8,y:-20},animate:{opacity:1,x:0,scale:1,y:0},exit:{opacity:0,x:400,scale:.8,y:-20},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-4 right-4 z-[9999] max-w-md w-full md:w-auto",children:t.jsx(m.div,{className:`p-4 rounded-xl border-2 backdrop-blur-xl shadow-2xl cursor-pointer ${ae.type==="critical"?"bg-gradient-to-r from-red-500 via-orange-500 to-red-500 border-red-400 text-white":ae.type==="warning"?"bg-gradient-to-r from-yellow-400 via-amber-500 to-yellow-400 border-yellow-300 text-white":"bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-500 border-blue-400 text-white"}`,onClick:()=>{Re(null)},whileHover:{scale:1.02},whileTap:{scale:.98},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(m.div,{animate:ae.type==="critical"?{scale:[1,1.2,1],rotate:[0,10,-10,0]}:{},transition:{duration:1,repeat:1/0},className:"text-2xl flex-shrink-0",children:ae.icon||"ðŸ””"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold mb-1",children:ae.message}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mt-2",children:[ae.blok&&t.jsxs("span",{className:"text-xs px-2 py-0.5 bg-white/20 rounded-full font-medium",children:["ðŸ“ ",ae.blok]}),ae.value&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-white/20 rounded-full font-bold",children:ae.value}),t.jsx("span",{className:"text-xs text-white/80 font-medium",children:ae.time})]})]}),t.jsx("button",{onClick:s=>{s.stopPropagation(),Re(null)},className:"flex-shrink-0 hover:bg-white/20 rounded-full p-1 transition-colors",children:t.jsx(za,{className:"w-4 h-4"})})]})})},ae.id)}),t.jsx(m.div,{variants:be,children:t.jsxs(oe,{className:"p-4 md:p-6 bg-white/50 backdrop-blur-lg border-2 border-green-200/50 shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(at,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-bold text-gray-800",children:"Tren Sensor"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Suhu, Kelembapan Udara & Tanah"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[ue&&t.jsxs(m.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"flex items-center gap-1 text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-full border border-green-200",children:[t.jsx(Ba,{className:"w-3 h-3"}),t.jsx("span",{children:"Online"})]}),$e.length>0&&t.jsxs("div",{className:"relative dropdown-container",children:[t.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{_e(!la),ke(!1)},className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl shadow-lg hover:shadow-xl transition-all font-medium text-xs min-w-[180px] justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qa,{className:"w-4 h-4"}),t.jsx("span",{className:"truncate",children:Ta()})]}),t.jsx(m.div,{animate:{rotate:la?180:0},transition:{duration:.2},children:t.jsx(Za,{className:"w-4 h-4"})})]}),t.jsx(Ue,{children:la&&t.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-2xl border-2 border-gray-100 overflow-hidden z-50",children:t.jsx("div",{className:"max-h-60 overflow-y-auto",children:$e.map((s,d)=>t.jsxs(m.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},whileHover:{backgroundColor:"#f3f4f6"},onClick:()=>{_a(s.value),_e(!1)},className:`w-full text-left px-4 py-3 flex items-center gap-3 transition-all ${I===s.value?"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500":"hover:bg-gray-50"}`,children:[t.jsx("span",{className:"text-lg",children:s.icon}),t.jsx("span",{className:"text-sm font-medium text-gray-700 flex-1",children:s.label}),I===s.value&&t.jsx(et,{className:"w-4 h-4 text-green-500"})]},s.value))})})})]})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[t.jsxs("span",{className:"text-xs font-medium text-gray-600 flex items-center gap-1",children:[t.jsx(Ha,{className:"w-3 h-3"}),"Periode:"]}),Ia.map(s=>t.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>zt(s.value),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all flex items-center gap-1.5 ${D===s.value?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[t.jsx("span",{children:s.icon}),t.jsx("span",{children:s.label})]},s.value))]}),ua.length>0?t.jsx(Ja,{width:"100%",height:250,children:t.jsxs(ci,{data:ua,children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"colorSuhu",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:.1})]}),t.jsxs("linearGradient",{id:"colorKelembapan",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),t.jsxs("linearGradient",{id:"colorKelembapanTanah",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:.1})]})]}),t.jsx(hn,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),t.jsx(fn,{dataKey:"time",tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),t.jsx(gn,{tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),t.jsx(qa,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),t.jsx(xn,{wrapperStyle:{fontSize:"11px",paddingTop:"10px"},iconType:"line"}),t.jsx(Ye,{type:"monotone",dataKey:"suhu",stroke:"#f97316",fillOpacity:1,fill:"url(#colorSuhu)",name:"Suhu (Â°C)",strokeWidth:2}),t.jsx(Ye,{type:"monotone",dataKey:"kelembapan",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorKelembapan)",name:"Kelembapan Udara (%)",strokeWidth:2}),ua[0]?.kelembapanTanah!==void 0&&t.jsx(Ye,{type:"monotone",dataKey:"kelembapanTanah",stroke:"#22c55e",fillOpacity:1,fill:"url(#colorKelembapanTanah)",name:"Kelembapan Tanah (%)",strokeWidth:2})]})}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(at,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Belum ada data sensor"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:ue?"Menunggu data dari Firebase...":"Data akan muncul setelah sensor mengirim data"})]})]})}),t.jsx(m.div,{variants:be,children:t.jsxs(oe,{className:"p-4 md:p-6 bg-white/50 backdrop-blur-lg border-2 border-purple-200/50 shadow-xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx(Ge,{className:"w-5 h-5 text-white"})}),t.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Jadwal Robot"})]}),(()=>{const s=X.filter(d=>{const f=`schedule_${d.id}`,k=J[f]?.status||d.status,{status:Y}=da(k),N=Y||k;return N==="cancelled"||N==="completed"||N==="done"?!1:N==="pending"||N==="in_progress"||N==="paused"}).map(d=>{const f=`schedule_${d.id}`,A=J[f];if(A){const k=A.status||d.status,{status:Y,progress:N}=da(k);return{...d,status:Y||A.status||d.status,progress_percentage:N!==null?N:A.progress_percentage??d.progress_percentage}}return d}).slice(0,5);return s.length>0?t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:s.map((d,f)=>t.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.05},whileHover:{scale:1.02,y:-2,x:5},className:`p-5 md:p-6 rounded-2xl border-2 shadow-lg hover:shadow-xl transition-all duration-300 ${d.status==="paused"?"bg-gradient-to-br from-orange-50/90 via-orange-100/80 to-amber-50/90 border-orange-300/60 shadow-orange-200/50":d.status==="in_progress"?"bg-gradient-to-br from-emerald-50/90 via-green-50/80 to-teal-50/90 border-emerald-300/60 shadow-emerald-200/50":"bg-gradient-to-br from-blue-50/90 via-cyan-50/80 to-sky-50/90 border-blue-300/60 shadow-blue-200/50"}`,children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-bold text-gray-800",children:d.blok_code||d.blok||`Blok #${d.blok_id}`}),d.blok_name&&t.jsxs("span",{className:"text-xs text-gray-500",children:["- ",d.blok_name]})]}),t.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-bold shadow-md ${Ca(d.status)}`,children:Da(d.status)})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${d.mission_type==="deteksi"?"bg-purple-100":d.mission_type==="penyiraman"?"bg-blue-100":d.mission_type==="pemupukan"?"bg-green-100":"bg-gray-100"}`,children:d.mission_type==="deteksi"?"ðŸ”":d.mission_type==="penyiraman"?"ðŸ’§":d.mission_type==="pemupukan"?"ðŸŒ±":"ðŸ“‹"}),t.jsx("p",{className:"text-base font-bold text-gray-800",children:Ea(d.mission_type)})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs mb-3",children:[t.jsxs("span",{className:"flex items-center gap-1 px-3 py-1.5 bg-white/80 rounded-lg shadow-sm",children:[t.jsx(Ge,{className:"w-3 h-3 text-gray-500"}),t.jsx("span",{className:"text-gray-700 font-medium",children:Mt(d.scheduled_at)})]}),d.priority&&t.jsxs("span",{className:`px-3 py-1.5 rounded-lg font-semibold shadow-sm ${d.priority==="urgent"?"bg-red-100 text-red-700 border border-red-200":d.priority==="high"?"bg-orange-100 text-orange-700 border border-orange-200":d.priority==="medium"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[d.priority==="urgent"?"ðŸš¨":d.priority==="high"?"âš¡":""," ",d.priority.toUpperCase()]})]}),(d.progress_percentage>0||d.status==="in_progress"||d.status==="paused")&&t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:t.jsx(m.div,{initial:{width:0},animate:{width:`${d.progress_percentage||0}%`},transition:{duration:.5,ease:"easeOut"},className:`h-2.5 rounded-full shadow-sm ${d.status==="paused"?"bg-gradient-to-r from-orange-400 to-amber-500":"bg-gradient-to-r from-green-400 to-emerald-500"}`},d.progress_percentage||0)}),t.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:d.status==="paused"?"DIJEDA":`Progress: ${d.progress_percentage||0}%`})]})]},d.id))}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ge,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Tidak ada jadwal aktif"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Jadwalkan misi robot untuk melihatnya di sini"})]})})()]})}),t.jsx(m.div,{variants:be,children:t.jsxs(oe,{className:"p-4 md:p-6 bg-white/50 backdrop-blur-lg border-2 border-gray-200/50 shadow-xl",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-800 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[t.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:0},whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},children:t.jsx(ze,{href:"/sensor",children:t.jsxs(Be,{variant:"outline",className:"h-20 md:h-24 w-full flex flex-col items-center justify-center gap-2 border-2 border-blue-300 hover:border-blue-400 hover:bg-blue-50 transition-all shadow-md hover:shadow-lg",children:[t.jsx("span",{className:"text-2xl",children:"ðŸ“Š"}),t.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Data Sensor Lengkap"})]})})}),t.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1},whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},children:t.jsx(ze,{href:"/robot",children:t.jsxs(Be,{variant:"outline",className:"h-20 md:h-24 w-full flex flex-col items-center justify-center gap-2 border-2 border-green-300 hover:border-green-400 hover:bg-green-50 transition-all shadow-md hover:shadow-lg",children:[t.jsx("span",{className:"text-2xl",children:"ðŸ¤–"}),t.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Kontrol Robot"})]})})}),t.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2},whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},children:t.jsx(ze,{href:"/prediksi",children:t.jsxs(Be,{variant:"outline",className:"h-20 md:h-24 w-full flex flex-col items-center justify-center gap-2 border-2 border-yellow-300 hover:border-yellow-400 hover:bg-yellow-50 transition-all shadow-md hover:shadow-lg",children:[t.jsx("span",{className:"text-2xl",children:"ðŸŒ¾"}),t.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Prediksi Panen"})]})})}),t.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3},whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},children:t.jsx(ze,{href:"/laporan",children:t.jsxs(Be,{variant:"outline",className:"h-20 md:h-24 w-full flex flex-col items-center justify-center gap-2 border-2 border-purple-300 hover:border-purple-400 hover:bg-purple-50 transition-all shadow-md hover:shadow-lg",children:[t.jsx("span",{className:"text-2xl",children:"ðŸ“„"}),t.jsx("span",{className:"text-xs font-bold text-gray-700",children:"Laporan"})]})})})]})]})})]})]})]})]})}export{Mi as default};
