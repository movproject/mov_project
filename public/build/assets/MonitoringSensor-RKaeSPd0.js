import{r as o,u as Aa,j as e,H as Ea,b as Ne}from"./app-CDIyXfzz.js";import{A as Da,X as Ye}from"./AuthenticatedLayout-BfeCSPIl.js";import{c as na,C as q,B as Y}from"./button-p4g7T8hM.js";import{u as Oa}from"./useRole-BFFRoqTW.js";import{o as Qe,r as $a,a as La,A as ne,W as ge,d as Ma}from"./firebase-CVaV2uOU.js";import{m as c}from"./proxy-DzmnYFB9.js";import{C as Le}from"./circle-check-BRr_3ZTi.js";import{C as za}from"./circle-x-xyFn3MhH.js";import{S as ke,D as Me}from"./sprout-CuEqcC8b.js";import{c as Ve,n as ia,a7 as oa,a8 as da,a9 as Ra,ae as Ua,ac as Ba,ad as Ze,y as ca,af as ma,K as Ka,ag as Fa,Q as Wa,ah as Ha,T as Va,w as ua,al as Ga,am as Xa,aj as Ja,O as qa,an as Ya,ao as ha,L as xa,ap as Qa,aq as Za,h as ba,ar as ea,as as aa,z as et,J as at,C as pe,a1 as tt,au as rt,A as st,a5 as lt,I as nt,av as it,ax as ot,aF as dt,aE as ct,aK as ta,aI as mt,aJ as ze,aG as Re,aL as Ue,aM as Be,aN as Ke,aH as Fe,aO as We}from"./CartesianChart-BLYFNSEz.js";import{F as ut}from"./funnel-cgvumGy3.js";import{M as ht}from"./map-pin-BTZe7WcA.js";import{A as xt}from"./index-B48i9LRO.js";import{W as bt}from"./wifi-off-BFBmOfhd.js";import{T as _e}from"./trending-up-CwclXeO4.js";import{C as ra}from"./calendar-BJNpb-vr.js";import{c as ga}from"./createLucideIcon-BwpbLGP3.js";import"./ApplicationLogo-eK3ZPc4I.js";import"./index-YTMNbmQK.js";import"./transition-2DpMPA6d.js";import"./book-open-CqqVG8Vg.js";import"./user-C27HZQAo.js";import"./with-selector-B5OWl5pm.js";const gt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pt=ga("pen",gt);const ft=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Se=ga("save",ft);var vt=["children"];function yt(a,r){if(a==null)return{};var s,l,h=jt(a,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);for(l=0;l<u.length;l++)s=u[l],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(h[s]=a[s])}return h}function jt(a,r){if(a==null)return{};var s={};for(var l in a)if({}.hasOwnProperty.call(a,l)){if(r.indexOf(l)!==-1)continue;s[l]=a[l]}return s}var wt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Nt=o.createContext(wt);function kt(a){var{children:r}=a,s=yt(a,vt);return o.createElement(Nt.Provider,{value:s},r)}var pa=(a,r,s,l)=>oa(a,"xAxis",r,l),fa=(a,r,s,l)=>da(a,"xAxis",r,l),va=(a,r,s,l)=>oa(a,"yAxis",s,l),ya=(a,r,s,l)=>da(a,"yAxis",s,l),_t=Ve([ia,pa,va,fa,ya],(a,r,s,l,h)=>Ba(a,"xAxis")?Ze(r,l,!1):Ze(s,h,!1)),St=(a,r,s,l,h)=>h;function Tt(a){return a.type==="line"}var Ct=Ve([Ua,St],(a,r)=>a.filter(Tt).find(s=>s.id===r)),It=Ve([ia,pa,va,fa,ya,Ct,_t,Ra],(a,r,s,l,h,u,y,C)=>{var{chartData:w,dataStartIndex:P,dataEndIndex:k}=C;if(!(u==null||r==null||s==null||l==null||h==null||l.length===0||h.length===0||y==null)){var{dataKey:I,data:z}=u,L;if(z!=null&&z.length>0?L=z:L=w?.slice(P,k+1),L!=null)return Yt({layout:a,xAxis:r,yAxis:s,xAxisTicks:l,yAxisTicks:h,dataKey:I,bandSize:y,displayedData:L})}}),Pt=["id"],At=["type","layout","connectNulls","needClip"],Et=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function sa(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);r&&(l=l.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),s.push.apply(s,l)}return s}function W(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?sa(Object(s),!0).forEach(function(l){Dt(a,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):sa(Object(s)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(s,l))})}return a}function Dt(a,r,s){return(r=Ot(r))in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function Ot(a){var r=$t(a,"string");return typeof r=="symbol"?r:r+""}function $t(a,r){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var l=s.call(a,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Ge(a,r){if(a==null)return{};var s,l,h=Lt(a,r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);for(l=0;l<u.length;l++)s=u[l],r.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(h[s]=a[s])}return h}function Lt(a,r){if(a==null)return{};var s={};for(var l in a)if({}.hasOwnProperty.call(a,l)){if(r.indexOf(l)!==-1)continue;s[l]=a[l]}return s}function ie(){return ie=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var l in s)({}).hasOwnProperty.call(s,l)&&(a[l]=s[l])}return a},ie.apply(null,arguments)}var Mt=a=>{var{dataKey:r,name:s,stroke:l,legendType:h,hide:u}=a;return[{inactive:u,dataKey:r,type:h,color:l,value:ua(s,r),payload:a}]};function zt(a){var{dataKey:r,data:s,stroke:l,strokeWidth:h,fill:u,name:y,hide:C,unit:w}=a;return{dataDefinedOnItem:s,positions:void 0,settings:{stroke:l,strokeWidth:h,fill:u,dataKey:r,nameKey:void 0,name:ua(y,r),hide:C,type:a.tooltipType,color:a.stroke,unit:w}}}var ja=(a,r)=>"".concat(r,"px ").concat(a-r,"px");function Rt(a,r){for(var s=a.length%2!==0?[...a,0]:a,l=[],h=0;h<r;++h)l=[...l,...s];return l}var Ut=(a,r,s)=>{var l=s.reduce((I,z)=>I+z);if(!l)return ja(r,a);for(var h=Math.floor(a/l),u=a%l,y=r-a,C=[],w=0,P=0;w<s.length;P+=s[w],++w)if(P+s[w]>u){C=[...s.slice(0,w),u-P];break}var k=C.length%2===0?[0,y]:[y];return[...Rt(s,h),...C,...k].map(I=>"".concat(I,"px")).join(", ")};function Bt(a,r){var s;if(o.isValidElement(a))s=o.cloneElement(a,r);else if(typeof a=="function")s=a(r);else{var l=na("recharts-line-dot",typeof a!="boolean"?a.className:"");s=o.createElement(ot,ie({},r,{className:l}))}return s}function Kt(a,r){return a==null?!1:r?!0:a.length===1}function Ft(a){var{clipPathId:r,points:s,props:l}=a,{dot:h,dataKey:u,needClip:y}=l;if(!Kt(s,h))return null;var{id:C}=l,w=Ge(l,Pt),P=ha(h),k=nt(w),I=it(h),z=s.map(($,j)=>{var H=W(W(W({key:"dot-".concat(j),r:3},k),I),{},{index:j,cx:$.x,cy:$.y,dataKey:u,value:$.value,payload:$.payload,points:s});return Bt(h,H)}),L={clipPath:y?"url(#clipPath-".concat(P?"":"dots-").concat(r,")"):void 0};return o.createElement(xa,ie({className:"recharts-line-dots",key:"dots"},L),z)}function Wt(a){var{showLabels:r,children:s,points:l}=a,h=o.useMemo(()=>l?.map(u=>{var y={x:u.x,y:u.y,width:0,height:0};return W(W({},y),{},{value:u.value,payload:u.payload,viewBox:y,parentViewBox:void 0,fill:void 0})}),[l]);return o.createElement(rt,{value:r?h:null},s)}function la(a){var{clipPathId:r,pathRef:s,points:l,strokeDasharray:h,props:u}=a,{type:y,layout:C,connectNulls:w,needClip:P}=u,k=Ge(u,At),I=W(W({},st(k)),{},{fill:"none",className:"recharts-line-curve",clipPath:P?"url(#clipPath-".concat(r,")"):void 0,points:l,type:y,layout:C,connectNulls:w,strokeDasharray:h??u.strokeDasharray});return o.createElement(o.Fragment,null,l?.length>1&&o.createElement(lt,ie({},I,{pathRef:s})),o.createElement(Ft,{points:l,clipPathId:r,props:u}))}function Ht(a){try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}function Vt(a){var{clipPathId:r,props:s,pathRef:l,previousPointsRef:h,longestAnimatedLengthRef:u}=a,{points:y,strokeDasharray:C,isAnimationActive:w,animationBegin:P,animationDuration:k,animationEasing:I,animateNewValues:z,width:L,height:$,onAnimationEnd:j,onAnimationStart:H}=s,A=h.current,B=et(s,"recharts-line-"),[Q,Z]=o.useState(!1),K=!Q,ee=o.useCallback(()=>{typeof j=="function"&&j(),Z(!1)},[j]),fe=o.useCallback(()=>{typeof H=="function"&&H(),Z(!0)},[H]),G=Ht(l.current),X=u.current;return o.createElement(Wt,{points:y,showLabels:K},s.children,o.createElement(at,{animationId:B,begin:P,duration:k,isActive:w,easing:I,onAnimationEnd:ee,onAnimationStart:fe,key:B},F=>{var oe=pe(X,G+X,F),te=Math.min(oe,G),O;if(w)if(C){var ve="".concat(C).split(/[,\s]+/gim).map(_=>parseFloat(_));O=Ut(te,G,ve)}else O=ja(G,te);else O=C==null?void 0:String(C);if(A){var E=A.length/y.length,de=F===1?y:y.map((_,ce)=>{var S=Math.floor(ce*E);if(A[S]){var re=A[S];return W(W({},_),{},{x:pe(re.x,_.x,F),y:pe(re.y,_.y,F)})}return z?W(W({},_),{},{x:pe(L*2,_.x,F),y:pe($/2,_.y,F)}):W(W({},_),{},{x:_.x,y:_.y})});return h.current=de,o.createElement(la,{props:s,points:de,clipPathId:r,pathRef:l,strokeDasharray:O})}return F>0&&G>0&&(h.current=y,u.current=te),o.createElement(la,{props:s,points:y,clipPathId:r,pathRef:l,strokeDasharray:O})}),o.createElement(tt,{label:s.label}))}function Gt(a){var{clipPathId:r,props:s}=a,l=o.useRef(null),h=o.useRef(0),u=o.useRef(null);return o.createElement(Vt,{props:s,clipPathId:r,previousPointsRef:l,longestAnimatedLengthRef:h,pathRef:u})}var Xt=(a,r)=>({x:a.x,y:a.y,value:a.value,errorVal:ba(a.payload,r)});class Jt extends o.Component{render(){var{hide:r,dot:s,points:l,className:h,xAxisId:u,yAxisId:y,top:C,left:w,width:P,height:k,id:I,needClip:z}=this.props;if(r)return null;var L=na("recharts-line",h),$=I,{r:j,strokeWidth:H}=Ya(s),A=ha(s),B=j*2+H;return o.createElement(o.Fragment,null,o.createElement(xa,{className:L},z&&o.createElement("defs",null,o.createElement(Qa,{clipPathId:$,xAxisId:u,yAxisId:y}),!A&&o.createElement("clipPath",{id:"clipPath-dots-".concat($)},o.createElement("rect",{x:w-B/2,y:C-B/2,width:P+B,height:k+B}))),o.createElement(kt,{xAxisId:u,yAxisId:y,data:l,dataPointFormatter:Xt,errorBarOffset:0},o.createElement(Gt,{props:this.props,clipPathId:$}))),o.createElement(Za,{activeDot:this.props.activeDot,points:l,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var wa={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Va.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function qt(a){var r=ca(a,wa),{activeDot:s,animateNewValues:l,animationBegin:h,animationDuration:u,animationEasing:y,connectNulls:C,dot:w,hide:P,isAnimationActive:k,label:I,legendType:z,xAxisId:L,yAxisId:$,id:j}=r,H=Ge(r,Et),{needClip:A}=Ga(L,$),B=Xa(),Q=Ja(),Z=ma(),K=qa(F=>It(F,L,$,Z,j));if(Q!=="horizontal"&&Q!=="vertical"||K==null||B==null)return null;var{height:ee,width:fe,x:G,y:X}=B;return o.createElement(Jt,ie({},H,{id:j,connectNulls:C,dot:w,activeDot:s,animateNewValues:l,animationBegin:h,animationDuration:u,animationEasing:y,isAnimationActive:k,hide:P,label:I,legendType:z,xAxisId:L,yAxisId:$,points:K,layout:Q,height:ee,width:fe,left:G,top:X,needClip:A}))}function Yt(a){var{layout:r,xAxis:s,yAxis:l,xAxisTicks:h,yAxisTicks:u,dataKey:y,bandSize:C,displayedData:w}=a;return w.map((P,k)=>{var I=ba(P,y);if(r==="horizontal"){var z=ea({axis:s,ticks:h,bandSize:C,entry:P,index:k}),L=aa(I)?null:l.scale(I);return{x:z,y:L,value:I,payload:P}}var $=aa(I)?null:s.scale(I),j=ea({axis:l,ticks:u,bandSize:C,entry:P,index:k});return $==null||j==null?null:{x:$,y:j,value:I,payload:P}}).filter(Boolean)}function Qt(a){var r=ca(a,wa),s=ma();return o.createElement(Ka,{id:r.id,type:"line"},l=>o.createElement(o.Fragment,null,o.createElement(Fa,{legendPayload:Mt(r)}),o.createElement(Wa,{fn:zt,args:r}),o.createElement(Ha,{type:"line",id:l,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,hide:r.hide,isPanorama:s}),o.createElement(qt,ie({},r,{id:l}))))}var Ce=o.memo(Qt);Ce.displayName="Line";var Zt=["axis"],He=o.forwardRef((a,r)=>o.createElement(dt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zt,tooltipPayloadSearcher:ct,categoricalChartProps:a,ref:r}));const Te=a=>{const r=[{suhu:"#f97316",kelembapan:"#3b82f6",kelembapanTanah:"#22c55e"},{suhu:"#ef4444",kelembapan:"#8b5cf6",kelembapanTanah:"#10b981"},{suhu:"#f59e0b",kelembapan:"#06b6d4",kelembapanTanah:"#84cc16"},{suhu:"#ec4899",kelembapan:"#6366f1",kelembapanTanah:"#14b8a6"}];return r[a%r.length]};function Nr({bloks:a=[],blokOptions:r=[],selectedBlokId:s="all",period:l="24h",currentSensors:h={},chartData:u=[],chartBlokCodes:y=[],alerts:C=[],lastUpdate:w="Tidak ada data",error:P=null,thresholds:k={}}){const I=Aa(),{auth:z}=I.props,{isKPetani:L}=Oa(),$=()=>I.props.csrf||document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",[j,H]=o.useState(l),[A,B]=o.useState(s),[Q,Z]=o.useState(h),[K,ee]=o.useState(!1),[fe,G]=o.useState(w),X=o.useRef([]),[F,oe]=o.useState(!1),te=o.useRef(null),[O,ve]=o.useState(null),[E,de]=o.useState({}),[_,ce]=o.useState(!1),[S,re]=o.useState(null),[U,M]=o.useState(null),[se,Na]=o.useState(()=>{try{const t=localStorage.getItem("monitoringSensorChartData");if(t){const m=JSON.parse(t),v=Date.now()-720*60*60*1e3;return m.filter(x=>x.timestamp>=v).map(x=>({...x,kelembapan:x.kelembapan??x.kelembUdara??0,kelembapanTanah:x.kelembapanTanah??x.kelembTanah??0,kelembUdara:x.kelembUdara??x.kelembapan??0,kelembTanah:x.kelembTanah??x.kelembapanTanah??0}))}}catch(t){console.error("Error loading chart data from localStorage:",t)}return[]});o.useEffect(()=>{const t={suhu_udara:{warning_max:35,critical_max:40,normal_min:20,normal_max:32},kelembapan_udara:{warning_min:30,critical_min:20,normal_min:60,normal_max:85},kelembapan_tanah:{warning_min:30,critical_min:20,normal_min:50,normal_max:75}},m={};["suhu_udara","kelembapan_udara","kelembapan_tanah"].forEach(n=>{m[n]={...t[n],...k[n]||{}}}),de(m)},[k]),o.useEffect(()=>{H(l),B(s)},[l,s]);const ka=t=>{H(t),Ne.get("/sensor",{blok_id:A,period:t},{preserveState:!0,preserveScroll:!0})},Xe=t=>{B(t),Ne.get("/sensor",{blok_id:t,period:j},{preserveState:!0,preserveScroll:!0})},_a=()=>{ve(null);const t={suhu_udara:{warning_max:35,critical_max:40,normal_min:20,normal_max:32},kelembapan_udara:{warning_min:30,critical_min:20,normal_min:60,normal_max:85},kelembapan_tanah:{warning_min:30,critical_min:20,normal_min:50,normal_max:75}},m={};["suhu_udara","kelembapan_udara","kelembapan_tanah"].forEach(n=>{m[n]={...t[n],...k[n]||{}}}),de(m)},me=async t=>{ce(!0),re(t);try{const m=E[t],n={};Object.keys(m).forEach(b=>{const g=m[b];if(g===""||g===void 0||g===null)n[b]=null;else{const i=parseFloat(g);n[b]=isNaN(i)?null:i}});const v=$(),p=await fetch(`/sensor-thresholds/${t}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":v,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(n)});let x;try{x=await p.json()}catch{x={success:!1,message:`Server error: ${p.status} ${p.statusText}`}}if(!p.ok){let b="Gagal menyimpan batas normal sensor";x.message?b=x.message:x.errors?b=Object.values(x.errors).flat().join(", ")||b:x.error&&(b=x.error),M({type:"error",message:b}),setTimeout(()=>{M(null)},5e3);return}x.success?(M({type:"success",message:x.message||"Batas normal sensor berhasil diperbarui",sensorType:t}),Ne.reload({only:["thresholds"],preserveScroll:!0}),setTimeout(()=>{M(null)},3e3)):(M({type:"error",message:x.message||"Gagal menyimpan batas normal sensor"}),setTimeout(()=>{M(null)},4e3))}catch(m){console.error("Error saving threshold:",m),M({type:"error",message:m.message||"Terjadi kesalahan saat menyimpan batas normal sensor. Pastikan semua nilai valid."}),setTimeout(()=>{M(null)},5e3)}finally{ce(!1),re(null)}},Sa=async()=>{ce(!0),re("all");try{const t=$(),m=["suhu_udara","kelembapan_udara","kelembapan_tanah"],n=[];for(const x of m){const b=E[x];if(!b)continue;const g={};Object.keys(b).forEach(i=>{const f=b[i];if(f===""||f===void 0||f===null)g[i]=null;else{const d=parseFloat(f);g[i]=isNaN(d)?null:d}});try{const i=await fetch(`/sensor-thresholds/${x}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(g)});let f;try{f=await i.json()}catch{f={success:!1,message:`Server error: ${i.status} ${i.statusText}`}}if(i.ok)n.push({sensorType:x,success:f.success||!0,message:f.message||"Berhasil disimpan"});else{let d="Gagal menyimpan";f.message?d=f.message:f.errors?d=Object.values(f.errors).flat().join(", ")||d:f.error&&(d=f.error),n.push({sensorType:x,success:!1,message:d})}}catch(i){n.push({sensorType:x,success:!1,message:i.message||"Gagal menyimpan"})}}const v=n.filter(x=>x.success).length,p=n.filter(x=>!x.success).length;p===0?(M({type:"success",message:`Semua batas normal sensor (${v}) berhasil diperbarui`}),Ne.reload({only:["thresholds"],preserveScroll:!0}),setTimeout(()=>{M(null)},3e3)):v>0?(M({type:"error",message:`${v} sensor berhasil, ${p} sensor gagal diperbarui`}),setTimeout(()=>{M(null)},4e3)):(M({type:"error",message:"Gagal menyimpan semua batas normal sensor"}),setTimeout(()=>{M(null)},4e3))}catch(t){console.error("Error saving all thresholds:",t),M({type:"error",message:"Terjadi kesalahan saat menyimpan batas normal sensor"}),setTimeout(()=>{M(null)},4e3)}finally{ce(!1),re(null)}},V=(t,m,n)=>{de(v=>({...v,[t]:{...v[t],[m]:parseFloat(n)||0}}))},[ue,Je]=o.useState({});o.useEffect(()=>{if(A==="all"){const t=Object.keys(ue);if(t.length>0){const m=t.map(g=>ue[g]?.suhu_udara).filter(g=>g!=null&&g!==0),n=t.map(g=>ue[g]?.kelembapan_udara).filter(g=>g!=null&&g!==0),v=t.map(g=>ue[g]?.kelembapan_tanah).filter(g=>g!=null&&g!==0),p=m.length>0?Math.round(m.reduce((g,i)=>g+i,0)/m.length*10)/10:0,x=n.length>0?Math.round(n.reduce((g,i)=>g+i,0)/n.length*10)/10:0,b=v.length>0?Math.round(v.reduce((g,i)=>g+i,0)/v.length*10)/10:0;Z({suhu_udara:{value:p,unit:"Â°C",status:"normal",timestamp:Date.now()},kelembapan_udara:{value:x,unit:"%",status:"normal",timestamp:Date.now()},kelembapan_tanah:{value:b,unit:"%",status:"normal",timestamp:Date.now()}})}}else Je({})},[ue,A]);const Ie=Object.keys(Q).length>0?Q:h,Pe=Ie?.suhu_udara?.value??0,Ae=Ie?.kelembapan_udara?.value??0,Ee=Ie?.kelembapan_tanah?.value??0,De=(t,m)=>{if(!m||m===0)return"normal";const n=E[t]||k[t]||{};if(t==="suhu_udara"){const v=n.critical_max??40,p=n.warning_max??35;return m>=v?"critical":m>=p?"warning":"normal"}else{const v=n.critical_min??20,p=n.warning_min??30;return m<=v?"critical":m<=p?"warning":"normal"}},ye=De("suhu_udara",Pe),je=De("kelembapan_udara",Ae),we=De("kelembapan_tanah",Ee),Oe=t=>{switch(t){case"critical":return"Kritis";case"warning":return"Peringatan";default:return"Normal"}},$e=t=>{switch(t){case"critical":return"bg-red-100 text-red-700 border-red-300";case"warning":return"bg-yellow-100 text-yellow-700 border-yellow-300";default:return"bg-green-100 text-green-700 border-green-300"}};o.useEffect(()=>{Z(h),G(w)},[h,w]),o.useEffect(()=>{const t=m=>{te.current&&!te.current.contains(m.target)&&oe(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const Ta=()=>{if(A==="all")return"ðŸ“Š Semua Blok";const t=r.find(m=>m.value.toString()===A.toString());return t?`ðŸ“ ${t.label}`:"Pilih Blok"};o.useEffect(()=>{X.current.forEach(n=>{Qe(n.ref,"value",n.callback)}),X.current=[];const t=A==="all"?a:a.filter(n=>n.id.toString()===A.toString());if(t.length===0){ee(!1);return}const m=new Set;return t.forEach(n=>{const v=n.kebun_id||n.kebun?.id,p=n.code;if(!v||!p)return;const x=`kebuns/kebun_${v}/bloks/${p}/sensors`,b=$a(Ma,x),g=i=>{const f=i.val();if(f){m.add(p),ee(!0);const d={};Object.keys(f).forEach(N=>{const D=f[N];if(D&&D.value!==void 0){let le="normal";N==="suhu_udara"?D.value>=40?le="critical":D.value>=35&&(le="warning"):(N==="kelembapan_udara"||N==="kelembapan_tanah")&&(D.value<=20?le="critical":D.value<=30&&(le="warning")),d[N]={value:D.value,unit:D.unit||(N==="suhu_udara"?"Â°C":"%"),status:D.status||le,timestamp:D.timestamp||Date.now(),blok_id:n.id,blok_code:p}}}),Je(N=>({...N,[p]:{suhu_udara:d.suhu_udara?.value,kelembapan_udara:d.kelembapan_udara?.value,kelembapan_tanah:d.kelembapan_tanah?.value}})),A!=="all"&&Object.keys(d).length>0&&Z(N=>({...N,...d}));const T=new Date,R=T.getTime(),J=Object.values(d).map(N=>N.timestamp||0).filter(N=>N>0),he=J.length>0?Math.max(...J):R,xe=new Date(he);G(xe.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})+" (Real-time)");const be={time:T.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),timestamp:R,blokId:p,suhu:d.suhu_udara?.value??0,kelembapan:d.kelembapan_udara?.value??0,kelembapanTanah:d.kelembapan_tanah?.value??0,kelembUdara:d.kelembapan_udara?.value??0,kelembTanah:d.kelembapan_tanah?.value??0};Na(N=>{const le=[...N.filter(ae=>!(ae.blokId===p&&Math.abs(ae.timestamp-R)<5e3)),be],Ia=R-720*60*60*1e3,qe=le.filter(ae=>ae.timestamp>=Ia).sort((ae,Pa)=>ae.timestamp-Pa.timestamp);try{localStorage.setItem("monitoringSensorChartData",JSON.stringify(qe))}catch(ae){console.error("Error saving chart data to localStorage:",ae)}return qe})}else m.delete(p),m.size===0&&ee(!1)};La(b,g,i=>{console.error("Firebase listener error:",i),ee(!1)}),X.current.push({ref:b,callback:g})}),()=>{X.current.forEach(n=>{Qe(n.ref,"value",n.callback)}),X.current=[]}},[a,A]);const Ca=t=>({suhu_udara:"Suhu Udara",kelembapan_udara:"Kelembaban Udara",kelembapan_tanah:"Kelembaban Tanah"})[t]||t;return e.jsxs(Da,{children:[e.jsx(Ea,{title:"Monitoring Sensor IoT"}),U&&e.jsx(c.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},className:"fixed top-4 right-4 z-[9999] max-w-md",children:e.jsxs("div",{className:`relative p-5 rounded-2xl shadow-2xl border-2 overflow-hidden ${U.type==="success"?"bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 border-green-300":"bg-gradient-to-br from-red-50 via-rose-50 to-red-100 border-red-300"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${U.type==="success"?"from-green-400/20 to-emerald-400/20":"from-red-400/20 to-rose-400/20"} opacity-0 animate-pulse`}),e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 ${U.type==="success"?"bg-green-300/20":"bg-red-300/20"} rounded-full blur-2xl -mr-16 -mt-16`}),e.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:200},className:`flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${U.type==="success"?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-red-500 to-rose-600"}`,children:U.type==="success"?e.jsx(Le,{className:"w-6 h-6 text-white"}):e.jsx(za,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`text-sm font-extrabold mb-1 ${U.type==="success"?"text-green-800":"text-red-800"}`,children:U.type==="success"?"Berhasil!":"Gagal!"}),e.jsx("p",{className:`text-sm font-semibold ${U.type==="success"?"text-green-700":"text-red-700"}`,children:U.message}),U.sensorType&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Sensor: ",Ca(U.sensorType)]})]}),e.jsx("button",{onClick:()=>M(null),className:`flex-shrink-0 w-6 h-6 rounded-lg flex items-center justify-center hover:bg-white/50 transition-colors ${U.type==="success"?"text-green-700":"text-red-700"}`,children:e.jsx(Ye,{className:"w-4 h-4"})})]}),e.jsx(c.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:3,ease:"linear"},className:`absolute bottom-0 left-0 h-1 ${U.type==="success"?"bg-green-500":"bg-red-500"}`})]})}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-emerald-50/20 to-cyan-50/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(16, 185, 129, 0.15) 1px, transparent 0)",backgroundSize:"50px 50px"}})}),e.jsxs("div",{className:"relative z-10 p-4 md:p-6 space-y-4 md:space-y-6 max-w-7xl mx-auto",children:[e.jsx(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:e.jsxs(q,{className:"p-6 bg-white/90 backdrop-blur-xl border-2 border-emerald-200/50 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-emerald-400/20 via-cyan-400/20 to-transparent rounded-full blur-3xl -mr-48 -mt-48"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-gradient-to-tr from-green-400/20 via-emerald-400/20 to-transparent rounded-full blur-3xl -ml-36 -mb-36"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c.div,{animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0},className:"w-14 h-14 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-2xl flex items-center justify-center shadow-xl shadow-emerald-500/30",children:e.jsx(ne,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-emerald-600 via-green-600 to-teal-600 bg-clip-text text-transparent mb-1",children:"Monitoring Sensor IoT"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Real-time & Historis"}),K&&e.jsxs(c.span,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-1 text-xs font-semibold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full border border-emerald-200",children:[e.jsx(c.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:e.jsx(ge,{className:"w-3 h-3"})}),"Live"]})]})]})]}),e.jsx(c.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:6,repeat:1/0},className:"hidden md:block",children:e.jsx(ke,{className:"w-12 h-12 text-emerald-500/60"})})]})]})}),P&&e.jsx(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4",children:e.jsxs(q,{className:"p-5 bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-400 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-200/30 rounded-full blur-2xl -mr-16 -mt-16"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx(c.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ta,{className:"w-6 h-6 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-red-700 flex-1",children:P})]})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},ref:te,className:"relative z-[100]",children:e.jsxs(q,{className:"p-4 bg-gradient-to-br from-white via-emerald-50/40 to-teal-50/40 backdrop-blur-xl border-2 border-emerald-200/60 shadow-xl overflow-visible relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-56 h-56 bg-gradient-to-br from-emerald-400/15 via-cyan-400/15 to-transparent rounded-full blur-3xl -mr-28 -mt-28"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-44 h-44 bg-gradient-to-tr from-green-400/15 via-emerald-400/15 to-transparent rounded-full blur-3xl -ml-22 -mb-22"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(c.div,{animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0},className:"w-11 h-11 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:e.jsx(ut,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-base font-extrabold text-gray-800 block",children:"Pilih Blok Monitoring"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5 font-medium",children:"Pilih blok untuk melihat data sensor real-time"})]})]}),e.jsxs("div",{className:"relative z-[101]",children:[e.jsxs(c.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>oe(!F),className:"w-full flex items-center justify-between gap-3 px-4 py-3 bg-white/95 backdrop-blur-sm border-2 border-emerald-300/70 rounded-xl shadow-lg hover:shadow-xl transition-all font-semibold text-sm text-gray-800 hover:border-emerald-400 group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md shadow-emerald-500/20",children:e.jsx(ht,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left flex-1 min-w-0",children:[e.jsx("span",{className:"block truncate font-bold text-gray-800 text-sm",children:Ta()}),e.jsx("span",{className:"block text-xs text-gray-500 mt-0.5",children:A==="all"?"Rata-rata semua blok":"Data sensor blok ini"})]})]}),e.jsx(c.div,{animate:{rotate:F?180:0},transition:{duration:.3,ease:"easeInOut"},className:"flex-shrink-0",children:e.jsx(mt,{className:"w-5 h-5 text-emerald-600 group-hover:text-emerald-700 transition-colors"})})]}),e.jsx(xt,{children:F&&e.jsx(c.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.25,ease:"easeOut"},className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border-2 border-emerald-200/60 overflow-hidden z-[9999] max-h-80",children:e.jsxs("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:[e.jsxs(c.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05},whileHover:{backgroundColor:"#f0fdf4",scale:1.01},whileTap:{scale:.98},onClick:()=>{Xe("all"),oe(!1)},className:`w-full text-left px-4 py-3 flex items-center gap-3 transition-all border-b border-gray-100 ${A==="all"?"bg-gradient-to-r from-emerald-50 via-green-50 to-teal-50 border-l-4 border-emerald-500 shadow-sm":"hover:bg-emerald-50/50"}`,children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md shadow-emerald-500/20",children:e.jsx("span",{className:"text-xl",children:"ðŸ“Š"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Semua Blok"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5 font-medium",children:"Rata-rata semua blok"})]}),A==="all"&&e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"flex-shrink-0",children:e.jsx(Le,{className:"w-5 h-5 text-emerald-600"})})]}),(r||[]).filter(t=>t.value!=="all").map((t,m)=>e.jsxs(c.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05+(m+1)*.03},whileHover:{backgroundColor:"#f0fdf4",scale:1.01},whileTap:{scale:.98},onClick:()=>{Xe(t.value),oe(!1)},className:`w-full text-left px-4 py-3 flex items-center gap-3 transition-all ${m<(r||[]).filter(n=>n.value!=="all").length-1?"border-b border-gray-100":""} ${A.toString()===t.value.toString()?"bg-gradient-to-r from-emerald-50 via-green-50 to-teal-50 border-l-4 border-emerald-500 shadow-sm":"hover:bg-emerald-50/50"}`,children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center flex-shrink-0 shadow-md shadow-blue-500/20",children:e.jsx("span",{className:"text-xl",children:"ðŸ“"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:t.label}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5 font-medium",children:"Data sensor blok ini"})]}),A.toString()===t.value.toString()&&e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"flex-shrink-0",children:e.jsx(Le,{className:"w-5 h-5 text-emerald-600"})})]},t.value))]})})})]})]})]})}),C&&C.length>0&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(q,{className:"p-5 bg-gradient-to-br from-red-50 via-orange-50 to-red-50 border-2 border-red-300/60 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-red-200/20 rounded-full blur-3xl -mr-20 -mt-20"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(c.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/30",children:e.jsx(ta,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-extrabold text-red-700",children:"Notifikasi Anomali"}),e.jsx("p",{className:"text-xs text-red-600",children:"Peringatan kondisi sensor tidak normal"})]})]}),e.jsx("div",{className:"space-y-3",children:C.map((t,m)=>e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},whileHover:{scale:1.02,x:5},className:`p-4 rounded-xl border-2 shadow-lg backdrop-blur-sm ${t.type==="critical"?"bg-gradient-to-r from-red-50 to-orange-50 border-red-400":"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-400"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="critical"?"bg-red-500":"bg-yellow-500"}`}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[t.sensor," - ",t.blok]})]}),e.jsx("span",{className:"text-xs font-medium text-gray-500 bg-white/80 px-2 py-1 rounded-full",children:t.waktu})]}),e.jsx("p",{className:`text-sm font-bold mb-2 ${t.type==="critical"?"text-red-700":"text-yellow-700"}`,children:t.pesan}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Nilai:"}),e.jsx("span",{className:`text-xs font-extrabold px-2 py-1 rounded ${t.type==="critical"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.nilai})]})]},t.id))})]})]})}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(c.div,{whileHover:{scale:1.03,y:-8},transition:{type:"spring",stiffness:300},children:e.jsxs(q,{className:"p-6 bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100 border-2 border-orange-300/60 shadow-2xl overflow-hidden relative group hover:shadow-orange-500/20 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-300/20 rounded-full blur-2xl -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-amber-300/20 rounded-full blur-xl -ml-12 -mb-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(c.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg shadow-orange-500/30",children:e.jsx(ze,{className:"w-6 h-6 text-white"})}),e.jsx(c.div,{initial:{scale:.9},animate:{scale:1},className:`px-3 py-1.5 rounded-full text-xs font-bold border-2 ${$e(ye)} shadow-sm`,children:Oe(ye)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Suhu Udara"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsxs("p",{className:"text-3xl font-extrabold text-orange-700",children:[Pe.toFixed(1),"Â°C"]}),ye!=="normal"&&e.jsx(c.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:`w-2 h-2 rounded-full ${ye==="critical"?"bg-red-500":"bg-yellow-500"}`})]}),e.jsx("div",{className:"mt-4 h-2 bg-orange-200 rounded-full overflow-hidden",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${Math.min(Pe/50*100,100)}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-orange-500 to-amber-500 rounded-full"})})]})]})}),e.jsx(c.div,{whileHover:{scale:1.03,y:-8},transition:{type:"spring",stiffness:300},children:e.jsxs(q,{className:"p-6 bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100 border-2 border-blue-300/60 shadow-2xl overflow-hidden relative group hover:shadow-blue-500/20 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-300/20 rounded-full blur-2xl -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-cyan-300/20 rounded-full blur-xl -ml-12 -mb-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(c.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/30",children:e.jsx(Me,{className:"w-6 h-6 text-white"})}),e.jsx(c.div,{initial:{scale:.9},animate:{scale:1},className:`px-3 py-1.5 rounded-full text-xs font-bold border-2 ${$e(je)} shadow-sm`,children:Oe(je)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Kelembaban Udara"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsxs("p",{className:"text-3xl font-extrabold text-blue-700",children:[Ae.toFixed(1),"%"]}),je!=="normal"&&e.jsx(c.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:`w-2 h-2 rounded-full ${je==="critical"?"bg-red-500":"bg-yellow-500"}`})]}),e.jsx("div",{className:"mt-4 h-2 bg-blue-200 rounded-full overflow-hidden",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${Math.min(Ae/100*100,100)}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full"})})]})]})}),e.jsx(c.div,{whileHover:{scale:1.03,y:-8},transition:{type:"spring",stiffness:300},children:e.jsxs(q,{className:"p-6 bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 border-2 border-emerald-300/60 shadow-2xl overflow-hidden relative group hover:shadow-emerald-500/20 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-400/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-300/20 rounded-full blur-2xl -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-green-300/20 rounded-full blur-xl -ml-12 -mb-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(c.div,{animate:{rotate:[0,-10,10,0]},transition:{duration:2.5,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:e.jsx(ke,{className:"w-6 h-6 text-white"})}),e.jsx(c.div,{initial:{scale:.9},animate:{scale:1},className:`px-3 py-1.5 rounded-full text-xs font-bold border-2 ${$e(we)} shadow-sm`,children:Oe(we)})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Kelembaban Tanah"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[e.jsxs("p",{className:"text-3xl font-extrabold text-emerald-700",children:[Ee.toFixed(1),"%"]}),we!=="normal"&&e.jsx(c.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:`w-2 h-2 rounded-full ${we==="critical"?"bg-red-500":"bg-yellow-500"}`})]}),e.jsx("div",{className:"mt-4 h-2 bg-emerald-200 rounded-full overflow-hidden",children:e.jsx(c.div,{initial:{width:0},animate:{width:`${Math.min(Ee/100*100,100)}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-emerald-500 to-green-500 rounded-full"})})]})]})})]}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex items-center justify-center gap-3",children:K?e.jsxs(c.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 border-2 border-emerald-300 rounded-xl shadow-lg",children:[e.jsx(c.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx(ge,{className:"w-4 h-4 text-emerald-600"})}),e.jsx("span",{className:"text-xs font-bold text-emerald-700",children:"Online"})]}):e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 border-2 border-gray-300 rounded-xl",children:[e.jsx(bt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Offline"})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(q,{className:"p-6 bg-white/90 backdrop-blur-xl border-2 border-emerald-200/50 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-emerald-400/10 via-cyan-400/10 to-transparent rounded-full blur-3xl -mr-32 -mt-32"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-emerald-500 via-green-500 to-teal-500 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/30",children:e.jsx(_e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-extrabold text-gray-800",children:"Grafik Historis"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Perbandingan data sensor per blok"})]})]})}),e.jsx("div",{className:"flex gap-2 mb-6",children:[{value:"24h",label:"24 Jam",icon:"ðŸ“…"},{value:"7d",label:"7 Hari",icon:"ðŸ“†"},{value:"30d",label:"30 Hari",icon:"ðŸ—“ï¸"}].map(t=>e.jsxs(c.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>ka(t.value),className:`flex-1 h-10 text-xs font-bold rounded-xl transition-all duration-300 ${j===t.value?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-2 border-gray-200"}`,children:[e.jsx("span",{className:"mr-1",children:t.icon}),t.label]},t.value))}),(()=>{let t=y||[];t.length===0&&(se.length>0?t=[...new Set(se.map(n=>n.blokId))].filter(Boolean).sort():t=a.map(n=>n.code).filter(Boolean).sort());let m=u||[];if(se.length>0){const n=Date.now();let v=1440*60*1e3;j==="24h"?v=1440*60*1e3:j==="7d"?v=10080*60*1e3:j==="30d"&&(v=720*60*60*1e3);const p=n-v,x=se.filter(b=>b.timestamp>=p);if(x.length>0)if(j==="24h"){const b={};x.forEach(i=>{const f=new Date(i.timestamp),d=`${String(f.getHours()).padStart(2,"0")}:00`;if(b[d]||(b[d]={time:d,suhu:{},kelembUdara:{},kelembTanah:{}},t.forEach(T=>{b[d].suhu[T]=[],b[d].kelembUdara[T]=[],b[d].kelembTanah[T]=[]})),i.blokId&&b[d].suhu[i.blokId]){const T=i.kelembapan??i.kelembUdara??0,R=i.kelembapanTanah??i.kelembTanah??0;i.suhu!==null&&i.suhu!==void 0&&b[d].suhu[i.blokId].push(i.suhu),T!=null&&b[d].kelembUdara[i.blokId].push(T),R!=null&&b[d].kelembTanah[i.blokId].push(R)}});const g=Object.values(b).map(i=>{const f={time:i.time};return t.forEach(d=>{const T=i.suhu[d]||[],R=i.kelembUdara[d]||[],J=i.kelembTanah[d]||[],he=T.length>0?Math.round(T.reduce((N,D)=>N+D,0)/T.length*10)/10:null,xe=R.length>0?Math.round(R.reduce((N,D)=>N+D,0)/R.length*10)/10:null,be=J.length>0?Math.round(J.reduce((N,D)=>N+D,0)/J.length*10)/10:null;f[`suhu_${d}`]=he,f[`kelembUdara_${d}`]=xe,f[`kelembTanah_${d}`]=be}),f}).sort((i,f)=>{const[d]=i.time.split(":").map(Number),[T]=f.time.split(":").map(Number);return d-T});g.length>0?m=g:u&&u.length>0&&(m=u)}else{const b={};x.forEach(i=>{const d=new Date(i.timestamp).toLocaleDateString("id-ID",{day:"2-digit",month:"short"});b[d]||(b[d]={time:d},t.forEach(T=>{b[d][`suhu_${T}`]=[],b[d][`kelembUdara_${T}`]=[],b[d][`kelembTanah_${T}`]=[]})),i.blokId&&b[d][`suhu_${i.blokId}`]&&(i.suhu!==null&&i.suhu!==void 0&&i.suhu!==0&&b[d][`suhu_${i.blokId}`].push(i.suhu),i.kelembUdara!==null&&i.kelembUdara!==void 0&&i.kelembUdara!==0&&b[d][`kelembUdara_${i.blokId}`].push(i.kelembUdara),i.kelembTanah!==null&&i.kelembTanah!==void 0&&i.kelembTanah!==0&&b[d][`kelembTanah_${i.blokId}`].push(i.kelembTanah))});const g=Object.values(b).map(i=>{const f={time:i.time};return t.forEach(d=>{const T=i[`suhu_${d}`]||[],R=i[`kelembUdara_${d}`]||[],J=i[`kelembTanah_${d}`]||[],he=T.length>0?Math.round(T.reduce((N,D)=>N+D,0)/T.length*10)/10:null,xe=R.length>0?Math.round(R.reduce((N,D)=>N+D,0)/R.length*10)/10:null,be=J.length>0?Math.round(J.reduce((N,D)=>N+D,0)/J.length*10)/10:null;f[`suhu_${d}`]=he,f[`kelembUdara_${d}`]=xe,f[`kelembTanah_${d}`]=be}),f}).sort((i,f)=>{try{const d=new Date(i.time.split(" ").reverse().join(" ")),T=new Date(f.time.split(" ").reverse().join(" "));return d-T}catch{return i.time.localeCompare(f.time)}});g.length>0?m=g:u&&u.length>0&&(m=u)}else u&&u.length>0&&(m=u)}else u&&u.length>0&&(m=u);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Suhu Udara (Â°C) - Perbandingan Blok"}),K&&se.length>0&&(j==="24h"||j==="7d"||j==="30d")&&e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),"Online"]})]}),m.length>0&&t.length>0?e.jsx(Re,{width:"100%",height:250,children:e.jsxs(He,{data:m,children:[e.jsx("defs",{children:t.map((n,v)=>{const p=Te(v);return e.jsxs("linearGradient",{id:`colorSuhu_${n}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:p.suhu,stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:p.suhu,stopOpacity:.1})]},`suhu-${n}`)})}),e.jsx(Ue,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(Be,{dataKey:"time",tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),e.jsx(Ke,{tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),e.jsx(Fe,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),e.jsx(We,{wrapperStyle:{fontSize:"11px",paddingTop:"10px"},iconType:"line"}),t.map((n,v)=>{const p=Te(v);return a.find(x=>x.code===n)?.name,e.jsx(Ce,{type:"monotone",dataKey:`suhu_${n}`,stroke:p.suhu,name:`Blok ${n} - Suhu`,strokeWidth:2.5,dot:{fill:p.suhu,r:3},activeDot:{r:5},connectNulls:!1},`suhu-${n}`)})]})}):e.jsx("div",{className:"h-[250px] flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Belum ada data historis"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:K?"Menunggu data dari Firebase...":"Data akan muncul setelah sensor mengirim data"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Kelembaban Udara (%) - Perbandingan Blok"}),K&&se.length>0&&(j==="24h"||j==="7d"||j==="30d")&&e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),"Online"]})]}),m.length>0&&t.length>0?e.jsx(Re,{width:"100%",height:250,children:e.jsxs(He,{data:m,children:[e.jsx(Ue,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(Be,{dataKey:"time",tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),e.jsx(Ke,{tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),e.jsx(Fe,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),e.jsx(We,{wrapperStyle:{fontSize:"11px",paddingTop:"10px"},iconType:"line"}),t.map((n,v)=>{const p=Te(v);return a.find(x=>x.code===n)?.name,e.jsx(Ce,{type:"monotone",dataKey:`kelembUdara_${n}`,stroke:p.kelembapan,name:`Blok ${n} - Udara`,strokeWidth:2.5,dot:{fill:p.kelembapan,r:3},activeDot:{r:5},connectNulls:!1},`kelembUdara-${n}`)})]})}):e.jsx("div",{className:"h-[250px] flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Belum ada data historis"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:K?"Menunggu data dari Firebase...":"Data akan muncul setelah sensor mengirim data"})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Kelembaban Tanah (%) - Perbandingan Blok"}),K&&se.length>0&&(j==="24h"||j==="7d"||j==="30d")&&e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(ge,{className:"w-3 h-3"}),"Online"]})]}),m.length>0&&t.length>0?e.jsx(Re,{width:"100%",height:250,children:e.jsxs(He,{data:m,children:[e.jsx(Ue,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(Be,{dataKey:"time",tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),e.jsx(Ke,{tick:{fontSize:11,fill:"#6b7280"},stroke:"#9ca3af"}),e.jsx(Fe,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"}}),e.jsx(We,{wrapperStyle:{fontSize:"11px",paddingTop:"10px"},iconType:"line"}),t.map((n,v)=>{const p=Te(v);return a.find(x=>x.code===n)?.name,e.jsx(Ce,{type:"monotone",dataKey:`kelembTanah_${n}`,stroke:p.kelembapanTanah,name:`Blok ${n} - Tanah`,strokeWidth:2.5,dot:{fill:p.kelembapanTanah,r:3},activeDot:{r:5},connectNulls:!1},`kelembTanah-${n}`)})]})}):e.jsx("div",{className:"h-[250px] flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_e,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Belum ada data historis"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:K?"Menunggu data dari Firebase...":"Data akan muncul setelah sensor mengirim data"})]})})]})]})})()]})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(q,{className:"p-6 bg-white/90 backdrop-blur-xl border-2 border-blue-200/50 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-gradient-to-br from-blue-400/10 via-cyan-400/10 to-transparent rounded-full blur-3xl -mr-24 -mt-24"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(c.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/30",children:e.jsx(ra,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-extrabold text-gray-800",children:"Riwayat Penyiraman Otomatis"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Log aktivitas sistem penyiraman"})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"text-center py-12 bg-gradient-to-br from-blue-50/50 to-cyan-50/50 rounded-xl border-2 border-dashed border-blue-200",children:[e.jsx(c.div,{animate:{scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},children:e.jsx(ra,{className:"w-16 h-16 mx-auto mb-4 text-blue-400"})}),e.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Riwayat penyiraman akan ditampilkan di sini"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Fitur ini akan segera tersedia"})]})})]})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(q,{className:"p-6 md:p-8 bg-white/95 backdrop-blur-2xl border-2 border-emerald-300/60 shadow-2xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-emerald-400/20 via-teal-400/20 to-cyan-400/20 rounded-full blur-3xl -mr-48 -mt-48 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-to-tr from-green-400/15 via-emerald-400/15 to-teal-400/15 rounded-full blur-3xl -ml-40 -mb-40 animate-pulse",style:{animationDelay:"1s"}}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c.div,{animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0},className:"w-14 h-14 md:w-16 md:h-16 bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-500 rounded-2xl flex items-center justify-center shadow-xl shadow-emerald-500/40",children:e.jsx(ne,{className:"w-7 h-7 md:w-8 md:h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-extrabold bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 bg-clip-text text-transparent",children:"Batas Normal Sensor"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-1",children:"Ambang batas untuk notifikasi dan peringatan"})]})]}),L&&!O&&e.jsx(c.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(Y,{size:"sm",onClick:()=>ve("all"),className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white shadow-lg shadow-emerald-500/30 px-4 py-2",children:[e.jsx(pt,{className:"w-4 h-4 mr-2"}),"Edit Threshold"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[O==="suhu_udara"||O==="all"?e.jsxs(c.div,{initial:{scale:.95},animate:{scale:1},className:"p-5 bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100 rounded-2xl border-2 border-orange-300 shadow-xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-orange-200/30 rounded-full blur-2xl -mr-12 -mt-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ze,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:"Suhu Udara"})]}),O==="all"&&e.jsx(Y,{size:"sm",onClick:()=>me("suhu_udara"),disabled:_&&(S==="suhu_udara"||S==="all"),className:"bg-emerald-600 hover:bg-emerald-700 text-white h-7 px-2",children:_&&(S==="suhu_udara"||S==="all")?e.jsx(ne,{className:"w-3 h-3 animate-spin"}):e.jsx(Se,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gray-600 mb-1 block",children:"Normal Min"}),e.jsx("input",{type:"number",value:E.suhu_udara?.normal_min||"",onChange:t=>V("suhu_udara","normal_min",t.target.value),className:"w-full p-2 text-xs border-2 border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",step:"0.1",placeholder:"20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gray-600 mb-1 block",children:"Normal Max"}),e.jsx("input",{type:"number",value:E.suhu_udara?.normal_max||"",onChange:t=>V("suhu_udara","normal_max",t.target.value),className:"w-full p-2 text-xs border-2 border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all",step:"0.1",placeholder:"32"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-yellow-600 mb-1 block",children:"âš ï¸ Warning"}),e.jsx("input",{type:"number",value:E.suhu_udara?.warning_max||"",onChange:t=>V("suhu_udara","warning_max",t.target.value),className:"w-full p-2 text-xs border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all bg-yellow-50/50",step:"0.1",placeholder:"35"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-red-600 mb-1 block",children:"ðŸš¨ Critical"}),e.jsx("input",{type:"number",value:E.suhu_udara?.critical_max||"",onChange:t=>V("suhu_udara","critical_max",t.target.value),className:"w-full p-2 text-xs border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all bg-red-50/50",step:"0.1",placeholder:"40"})]})]}),O==="all"&&e.jsx(Y,{size:"sm",onClick:()=>me("suhu_udara"),disabled:_&&(S==="suhu_udara"||S==="all"),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white text-xs py-2 shadow-lg",children:_&&(S==="suhu_udara"||S==="all")?"Menyimpan...":"ðŸ’¾ Simpan Suhu Udara"})]})]}):e.jsxs(c.div,{whileHover:{scale:1.02,y:-2},className:"p-5 bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100 rounded-2xl border-2 border-orange-300/60 shadow-lg overflow-hidden relative group cursor-pointer",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-orange-200/20 rounded-full blur-xl -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ze,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Suhu Udara"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Batas Normal"})]})]}),e.jsx("div",{className:"bg-white/80 rounded-xl p-3 border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Range:"}),e.jsxs("span",{className:"text-base font-extrabold text-orange-700",children:[E.suhu_udara?.normal_min||k.suhu_udara?.normal_min||20," - ",E.suhu_udara?.normal_max||k.suhu_udara?.normal_max||32,"Â°C"]})]})})]})]}),O==="kelembapan_udara"||O==="all"?e.jsxs(c.div,{initial:{scale:.95},animate:{scale:1},className:"p-5 bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100 rounded-2xl border-2 border-blue-300 shadow-xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-200/30 rounded-full blur-2xl -mr-12 -mt-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:"Kelembaban Udara"})]}),O==="all"&&e.jsx(Y,{size:"sm",onClick:()=>me("kelembapan_udara"),disabled:_&&(S==="kelembapan_udara"||S==="all"),className:"bg-emerald-600 hover:bg-emerald-700 text-white h-7 px-2",children:_&&(S==="kelembapan_udara"||S==="all")?e.jsx(ne,{className:"w-3 h-3 animate-spin"}):e.jsx(Se,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gray-600 mb-1 block",children:"Normal Min"}),e.jsx("input",{type:"number",value:E.kelembapan_udara?.normal_min||"",onChange:t=>V("kelembapan_udara","normal_min",t.target.value),className:"w-full p-2 text-xs border-2 border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",step:"0.1",placeholder:"60"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gray-600 mb-1 block",children:"Normal Max"}),e.jsx("input",{type:"number",value:E.kelembapan_udara?.normal_max||"",onChange:t=>V("kelembapan_udara","normal_max",t.target.value),className:"w-full p-2 text-xs border-2 border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",step:"0.1",placeholder:"85"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-yellow-600 mb-1 block",children:"âš ï¸ Warning"}),e.jsx("input",{type:"number",value:E.kelembapan_udara?.warning_min||"",onChange:t=>V("kelembapan_udara","warning_min",t.target.value),className:"w-full p-2 text-xs border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all bg-yellow-50/50",step:"0.1",placeholder:"30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-red-600 mb-1 block",children:"ðŸš¨ Critical"}),e.jsx("input",{type:"number",value:E.kelembapan_udara?.critical_min||"",onChange:t=>V("kelembapan_udara","critical_min",t.target.value),className:"w-full p-2 text-xs border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all bg-red-50/50",step:"0.1",placeholder:"20"})]})]}),O==="all"&&e.jsx(Y,{size:"sm",onClick:()=>me("kelembapan_udara"),disabled:_&&(S==="kelembapan_udara"||S==="all"),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white text-xs py-2 shadow-lg",children:_&&(S==="kelembapan_udara"||S==="all")?"Menyimpan...":"ðŸ’¾ Simpan Kelembaban Udara"})]})]}):e.jsxs(c.div,{whileHover:{scale:1.02,y:-2},className:"p-5 bg-gradient-to-br from-blue-50 via-cyan-50 to-blue-100 rounded-2xl border-2 border-blue-300/60 shadow-lg overflow-hidden relative group cursor-pointer",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-200/20 rounded-full blur-xl -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Kelembaban Udara"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Batas Normal"})]})]}),e.jsx("div",{className:"bg-white/80 rounded-xl p-3 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Range:"}),e.jsxs("span",{className:"text-base font-extrabold text-blue-700",children:[E.kelembapan_udara?.normal_min||k.kelembapan_udara?.normal_min||60," - ",E.kelembapan_udara?.normal_max||k.kelembapan_udara?.normal_max||85,"%"]})]})})]})]}),O==="kelembapan_tanah"||O==="all"?e.jsxs(c.div,{initial:{scale:.95},animate:{scale:1},className:"p-5 bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 rounded-2xl border-2 border-emerald-300 shadow-xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-200/30 rounded-full blur-2xl -mr-12 -mt-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ke,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:"Kelembaban Tanah"})]}),O==="all"&&e.jsx(Y,{size:"sm",onClick:()=>me("kelembapan_tanah"),disabled:_&&(S==="kelembapan_tanah"||S==="all"),className:"bg-emerald-600 hover:bg-emerald-700 text-white h-7 px-2",children:_&&(S==="kelembapan_tanah"||S==="all")?e.jsx(ne,{className:"w-3 h-3 animate-spin"}):e.jsx(Se,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gray-600 mb-1 block",children:"Normal Min"}),e.jsx("input",{type:"number",value:E.kelembapan_tanah?.normal_min||"",onChange:t=>V("kelembapan_tanah","normal_min",t.target.value),className:"w-full p-2 text-xs border-2 border-emerald-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all",step:"0.1",placeholder:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gray-600 mb-1 block",children:"Normal Max"}),e.jsx("input",{type:"number",value:E.kelembapan_tanah?.normal_max||"",onChange:t=>V("kelembapan_tanah","normal_max",t.target.value),className:"w-full p-2 text-xs border-2 border-emerald-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all",step:"0.1",placeholder:"75"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-yellow-600 mb-1 block",children:"âš ï¸ Warning"}),e.jsx("input",{type:"number",value:E.kelembapan_tanah?.warning_min||"",onChange:t=>V("kelembapan_tanah","warning_min",t.target.value),className:"w-full p-2 text-xs border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all bg-yellow-50/50",step:"0.1",placeholder:"30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-red-600 mb-1 block",children:"ðŸš¨ Critical"}),e.jsx("input",{type:"number",value:E.kelembapan_tanah?.critical_min||"",onChange:t=>V("kelembapan_tanah","critical_min",t.target.value),className:"w-full p-2 text-xs border-2 border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all bg-red-50/50",step:"0.1",placeholder:"20"})]})]}),O==="all"&&e.jsx(Y,{size:"sm",onClick:()=>me("kelembapan_tanah"),disabled:_&&(S==="kelembapan_tanah"||S==="all"),className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white text-xs py-2 shadow-lg",children:_&&(S==="kelembapan_tanah"||S==="all")?"Menyimpan...":"ðŸ’¾ Simpan Kelembaban Tanah"})]})]}):e.jsxs(c.div,{whileHover:{scale:1.02,y:-2},className:"p-5 bg-gradient-to-br from-emerald-50 via-green-50 to-emerald-100 rounded-2xl border-2 border-emerald-300/60 shadow-lg overflow-hidden relative group cursor-pointer",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-200/20 rounded-full blur-xl -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ke,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-800",children:"Kelembaban Tanah"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Batas Normal"})]})]}),e.jsx("div",{className:"bg-white/80 rounded-xl p-3 border border-emerald-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Range:"}),e.jsxs("span",{className:"text-base font-extrabold text-emerald-700",children:[E.kelembapan_tanah?.normal_min||k.kelembapan_tanah?.normal_min||50," - ",E.kelembapan_tanah?.normal_max||k.kelembapan_tanah?.normal_max||75,"%"]})]})})]})]})]}),O==="all"&&e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(Y,{size:"sm",onClick:Sa,disabled:_,className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white font-bold py-2.5 shadow-lg",children:_?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4 mr-2 animate-spin"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Simpan Semua Sensor"]})}),e.jsxs(Y,{size:"sm",onClick:_a,disabled:_,variant:"outline",className:"flex-1 border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-2.5",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Batal Edit"]})]}),e.jsx("div",{className:"text-xs text-gray-500 text-center bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:"ðŸ’¡ Anda dapat menyimpan semua sensor sekaligus atau menyimpan setiap sensor secara terpisah"})]}),!O&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-6 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border-2 border-emerald-200/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(ne,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-bold text-emerald-700 mb-1",children:"Info Threshold"}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Threshold ini digunakan untuk menentukan status sensor (Normal, Peringatan, Kritis) dan akan memicu notifikasi otomatis ketika nilai sensor melebihi ambang batas yang ditentukan."})]})]})})]})]})})]})]})]})}export{Nr as default};
