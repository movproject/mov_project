import{u as tt,r as c,j as e,H as st}from"./app-CDIyXfzz.js";import{A as at,X as J,C as rt}from"./AuthenticatedLayout-BfeCSPIl.js";import{C as $,B as k}from"./button-p4g7T8hM.js";import{I as ce}from"./input-Dv1uTb7o.js";import{L as S}from"./label-BfEYsCR3.js";import{r as m,a as X,o as W,W as it,A as nt,s as b,d as p}from"./firebase-CVaV2uOU.js";import{A as ue}from"./index-B48i9LRO.js";import{m as l}from"./proxy-DzmnYFB9.js";import{C as De}from"./circle-check-big-VEQSawEg.js";import{C as Re}from"./circle-x-xyFn3MhH.js";import{B as Ie,a as ot,Z as G,R as lt}from"./zap-CUyq2s09.js";import{W as dt}from"./wifi-off-BFBmOfhd.js";import{M as me}from"./map-pin-BTZe7WcA.js";import{c as T}from"./createLucideIcon-BwpbLGP3.js";import{C as U}from"./calendar-BJNpb-vr.js";import{C as ct}from"./clock-DZRm8Mac.js";import{T as ut}from"./trash-2-DtlPX-Ab.js";import"./ApplicationLogo-eK3ZPc4I.js";import"./index-YTMNbmQK.js";import"./transition-2DpMPA6d.js";import"./book-open-CqqVG8Vg.js";import"./user-C27HZQAo.js";const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pt=T("circle-alert",mt);const ht=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],gt=T("gauge",ht);const xt=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],pe=T("loader",xt);const bt=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ft=T("navigation",bt);const yt=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],jt=T("pause",yt);const wt=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],_t=T("play",wt);const vt=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Nt=T("radio",vt);function Ut({bloks:V=[],initialRobotStatus:P={},initialActiveMission:Ae=null,recentSchedules:Le=[]}){const he=tt(),{auth:Pe}=he.props,j=Pe?.user?.role==="k-petani",[u,Be]=c.useState({current_state:P?.current_state||"offline",battery_level:P?.battery_level||0,current_location:P?.current_location||null,last_update:P?.last_update||null}),[h,Y]=c.useState(Ae),[A,L]=c.useState(Le),[_,Ee]=c.useState({}),[Oe,ge]=c.useState([]),[Ke,B]=c.useState(!1),[Fe,E]=c.useState(!1),[D,R]=c.useState(!1),[O,Z]=c.useState(null),[xe,qe]=c.useState("deteksi"),[be,fe]=c.useState(""),[ye,je]=c.useState(""),[we,_e]=c.useState(""),[ve,Ne]=c.useState(""),[ke,Se]=c.useState("medium"),[K,He]=c.useState("deteksi"),[v,Me]=c.useState(""),Q=c.useRef(null),ee=c.useRef(null),te=c.useRef(null),se=c.useRef(null),ae=()=>he.props.csrf||document.querySelector('meta[name="csrf-token"]')?.content||"",d=(t,s="success")=>{Z({message:t,type:s}),setTimeout(()=>Z(null),5e3)},M=async()=>{try{const t=await fetch("/api/robot/schedules?per_page=20",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(t.ok){const s=await t.json();if(s.success&&s.data?.data){const r=s.data.data.filter(a=>a.status!=="cancelled").map(a=>({id:a.id,blok_id:a.blok_id,blok_code:a.blok?.code||null,blok_name:a.blok?.name||null,mission_type:a.mission_type,description:a.description,scheduled_at:a.scheduled_at,started_at:a.started_at,completed_at:a.completed_at,status:a.status,priority:a.priority,progress_percentage:a.progress_percentage||0,mission_details:a.mission_details,created_by:a.creator?.name||null}));L(r)}}}catch(t){console.error("Error fetching schedules:",t)}},ze=async t=>{if(t.preventDefault(),!!j){R(!0);try{const s=new Date(`${ye}T${we}`);if(s<=new Date){d("Waktu jadwal harus di masa depan!","error"),R(!1);return}const r=await fetch("/api/robot/schedules",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":ae()},credentials:"same-origin",body:JSON.stringify({blok_id:parseInt(be),mission_type:xe,description:ve,scheduled_at:s.toISOString(),priority:ke,mission_details:{}})});if(!r.ok){const o=await r.text();console.error("Error response:",o);try{const n=JSON.parse(o);d(n.message||`HTTP error! status: ${r.status}`,"error")}catch{d(`HTTP error! status: ${r.status}`,"error")}R(!1);return}const a=await r.json();a.success?(a.warning?d(`Jadwal dibuat, tapi ada peringatan: ${a.warning}`,"error"):d("Jadwal misi berhasil dibuat!","success"),B(!1),fe(""),je(""),_e(""),Ne(""),Se("medium"),await M()):d(a.message||"Gagal membuat jadwal","error")}catch(s){console.error("Error creating schedule:",s),d("Terjadi kesalahan saat membuat jadwal","error")}finally{R(!1)}}},Je=async()=>{if(!j||!h&&!f)return;const t=h?.schedule_id||f?.id;if(!t)return;const s=`schedule_${t}`,a=(_[s]?.status||f?.status)==="paused";try{a?(await b(m(p,`robot/schedules/${s}/status`),"in_progress"),await b(m(p,"robot/commands/resume"),{schedule_id:t,timestamp:Date.now(),command:"resume"}),d("Misi dilanjutkan","success")):(await b(m(p,`robot/schedules/${s}/status`),"paused"),await b(m(p,"robot/commands/pause"),{schedule_id:t,timestamp:Date.now(),command:"pause"}),d("Misi dijedakan","success"))}catch(o){console.error("Error pausing/resuming mission:",o),d("Gagal mengirim perintah","error")}},Xe=async t=>{if(j&&confirm("Yakin ingin membatalkan jadwal ini?"))try{const r=await(await fetch(`/api/robot/schedules/${t}/cancel`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":ae()},credentials:"same-origin"})).json();r.success?(d("Jadwal berhasil dibatalkan","success"),L(a=>a.map(o=>o.id===parseInt(t)||o.id===t?{...o,status:"cancelled"}:o).filter(o=>o.status!=="cancelled")),await M()):d(r.message||"Gagal membatalkan jadwal","error")}catch(s){console.error("Error canceling schedule:",s),d("Terjadi kesalahan saat membatalkan jadwal","error")}},We=async()=>{if(j){if(!v){d("Pilih blok terlebih dahulu","error");return}if(u.current_state==="offline"){d("Robot sedang offline, tidak dapat diaktifkan","error");return}R(!0);try{const t=V.find(a=>a.id===parseInt(v)||a.id===v),s=t?.code||`blok_${v}`,r=Date.now();await b(m(p,"robot/commands/start"),{mission_type:K,blok_id:s,blok_db_id:v,command:"start",mode:"manual",timestamp:r,priority:"high"}),await b(m(p,"robot/active_mission"),{mission_type:K,blok_id:s,blok_db_id:v,status:"in_progress",progress_percentage:0,started_at:r,current_task:null,images_captured:0,total_images:0,mode:"manual",schedule_id:null}),d(`Robot diaktifkan untuk ${I(K)} di ${t?.code||s}`,"success"),Me(""),E(!1)}catch(t){console.error("Error starting robot manually:",t),d("Gagal mengaktifkan robot","error")}finally{R(!1)}}},Ge=async(t,s=!1)=>{if(j&&confirm("Yakin ingin menghapus riwayat misi ini?"))try{if(s)await b(m(p,`robot/completed_missions/${t}`),null),d("Riwayat misi manual berhasil dihapus","success");else{const a=await(await fetch(`/api/robot/schedules/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":ae()},credentials:"same-origin"})).json();a.success?(d("Riwayat misi berhasil dihapus","success"),L(o=>o.filter(n=>n.id!==parseInt(t)&&n.id!==t)),await M()):d(a.message||"Gagal menghapus riwayat misi","error")}}catch(r){console.error("Error deleting history:",r),d("Terjadi kesalahan saat menghapus riwayat misi","error")}};c.useEffect(()=>{const t=m(p,"robot/status");Q.current=X(t,n=>{const i=n.val();i&&Be({current_state:i.current_state||"offline",battery_level:i.battery_level||0,current_location:i.current_location||i.location||null,last_update:i.last_update||null})});const s=m(p,"robot/active_mission");ee.current=X(s,async n=>{const i=n.val();if(i){const y=i.status,{status:w,progress:x}=r(y),z=w||i.status;if(z==="done"||z==="completed"||y?.toLowerCase().includes("done")||y?.toLowerCase().includes("completed")){if(i.schedule_id){const g=`schedule_${i.schedule_id}`;try{await b(m(p,`robot/schedules/${g}/status`),"completed"),await b(m(p,`robot/schedules/${g}/progress_percentage`),100),await b(m(p,`robot/schedules/${g}/completed_at`),Date.now()),d("Misi selesai dan telah dipindahkan ke riwayat","success"),M()}catch(de){console.error("Error updating schedule status:",de),d("Misi selesai, tetapi gagal memperbarui status jadwal","error")}}else try{const g=`manual_${Date.now()}`;await b(m(p,`robot/completed_missions/${g}`),{mission_type:i.mission_type,blok_id:i.blok_id,blok_db_id:i.blok_db_id||null,status:"completed",progress_percentage:100,started_at:i.started_at,completed_at:Date.now(),current_task:i.current_task||null,images_captured:i.images_captured||0,total_images:i.total_images||0,mode:"manual",mission_id:g}),d("Misi manual selesai dan telah dipindahkan ke riwayat","success")}catch(g){console.error("Error saving completed manual mission:",g),d("Misi manual selesai, tetapi gagal menyimpan ke riwayat","error")}setTimeout(async()=>{try{await b(m(p,"robot/active_mission"),null)}catch(g){console.error("Error clearing active mission:",g)}},1e3),Y(null)}else Y({schedule_id:i.schedule_id||null,blok_id:i.blok_id||null,mission_type:i.mission_type||null,started_at:i.started_at||null,progress_percentage:x!==null?x:i.progress_percentage||0,current_task:i.current_task||null,images_captured:i.images_captured||0,total_images:i.total_images||0,status:w||i.status})}else Y(null)});const r=n=>{if(!n)return{status:null,progress:null};const i=n.match(/in_progress[_-]?(\d+)%?/i);return i?{status:"in_progress",progress:parseInt(i[1])}:n.toLowerCase().includes("completed")||n.toLowerCase().includes("done")?{status:"completed",progress:100}:{status:n,progress:null}},a=m(p,"robot/schedules");te.current=X(a,n=>{const i=n.val();Ee(i||{}),i?L(y=>y.map(x=>{const z=`schedule_${x.id}`,g=i[z];if(g){const de=g.status||x.status,{status:Ze,progress:Te}=r(de),Qe=Ze||g.status||x.status,et=Te!==null?Te:g.progress_percentage??x.progress_percentage;return{...x,status:Qe,progress_percentage:et}}return x}).filter(x=>x.status!=="cancelled")):M().then(()=>{L(y=>y.filter(w=>w.status!=="cancelled"))})});const o=m(p,"robot/completed_missions");return se.current=X(o,n=>{const i=n.val();if(i){const y=Object.keys(i).map(w=>({...i[w],id:w,isManual:!0}));y.sort((w,x)=>(x.completed_at||0)-(w.completed_at||0)),ge(y)}else ge([])}),M(),()=>{Q.current&&W(t,Q.current),ee.current&&W(s,ee.current),te.current&&W(a,te.current),se.current&&W(o,se.current)}},[]);const re=t=>({active:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",idle:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/30",charging:"bg-gradient-to-r from-yellow-400 to-amber-500 text-white border-yellow-300 shadow-lg shadow-yellow-400/30",offline:"bg-gradient-to-r from-red-400 to-red-500 text-white border-red-300 shadow-lg shadow-red-400/30",in_progress:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",paused:"bg-gradient-to-r from-orange-400 to-orange-500 text-white border-orange-300 shadow-lg shadow-orange-400/30",pending:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/30",completed:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",done:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400 shadow-lg shadow-green-500/30",cancelled:"bg-gradient-to-r from-gray-400 to-gray-500 text-white border-gray-300",failed:"bg-gradient-to-r from-red-400 to-red-500 text-white border-red-300 shadow-lg shadow-red-400/30"})[t]||"bg-gradient-to-r from-gray-400 to-gray-500 text-white border-gray-300",ie=t=>({active:"AKTIF",idle:"ONLINE",charging:"MENGISI",offline:"OFFLINE",in_progress:"BERJALAN",paused:"DIJEDA",pending:"TERJADWAL",completed:"SELESAI",done:"SELESAI",cancelled:"DIBATALKAN",failed:"GAGAL"})[t]||t.toUpperCase(),I=t=>({deteksi:"ðŸ” Deteksi Kematangan",penyiraman:"ðŸ’§ Penyiraman",pemupukan:"ðŸŒ± Pemupukan",kombinasi:"âš¡ Kombinasi"})[t]||t,F=t=>t>60?"text-green-500":t>30?"text-yellow-500":"text-red-500",Ue=t=>t>60?"from-green-400 to-emerald-500":t>30?"from-yellow-400 to-amber-500":"from-red-400 to-red-500",Ve=t=>{if(!t||t==="Tidak diketahui")return"Tidak diketahui";if(typeof t=="object"){if(t.blok_id||t.blok_code)return t.blok_id||t.blok_code||"Tidak diketahui";if(t.name)return t.name}return t},Ye=()=>Ve(u.current_location),ne=t=>t?new Date(t).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",q=u.current_state==="active"||u.current_state==="idle",H=h&&(h.schedule_id||h.mission_type),N=t=>{if(!t)return{status:null,progress:null};const s=t.match(/in_progress[_-]?(\d+)%?/i);return s?{status:"in_progress",progress:parseInt(s[1])}:t.toLowerCase().includes("completed")||t.toLowerCase().includes("done")?{status:"completed",progress:100}:{status:t,progress:null}},oe=A.some(t=>{const s=`schedule_${t.id}`,a=_[s]?.status||t.status,{status:o}=N(a);return o==="in_progress"||o==="paused"}),C=A.find(t=>{const s=`schedule_${t.id}`,a=_[s]?.status||t.status,{status:o}=N(a);return o==="in_progress"||o==="paused"}),le=A.some(t=>{const s=`schedule_${t.id}`,a=_[s]?.status||t.status,{status:o}=N(a);return o==="paused"}),f=C?(()=>{const t=`schedule_${C.id}`,s=_[t];if(s){const r=s.status||C.status,{status:a,progress:o}=N(r);return{...C,...s,status:a||s.status||C.status,progress_percentage:o!==null?o:s.progress_percentage??C.progress_percentage}}return C})():null,Ce=A.filter(t=>{const s=`schedule_${t.id}`,a=_[s]?.status||t.status,{status:o}=N(a),n=o||a;return n==="cancelled"||n==="completed"||n==="done"?!1:n==="pending"||n==="in_progress"||n==="paused"}).map(t=>{const s=`schedule_${t.id}`,r=_[s];if(r){const a=r.status||t.status,{status:o,progress:n}=N(a);return{...t,status:o||r.status||t.status,progress_percentage:n!==null?n:r.progress_percentage??t.progress_percentage}}return t}),$e=[...A.filter(t=>{const s=`schedule_${t.id}`,a=_[s]?.status||t.status,{status:o}=N(a),n=o||a;return n==="cancelled"?!1:n==="completed"||n==="done"||n==="failed"}).map(t=>{const s=`schedule_${t.id}`,r=_[s];if(r){const a=r.status||t.status,{status:o,progress:n}=N(a);return{...t,status:o||r.status||t.status,progress_percentage:n!==null?n:r.progress_percentage??t.progress_percentage,isManual:!1}}return{...t,isManual:!1}}),...Oe.map(t=>({id:t.mission_id||t.id,blok_id:t.blok_db_id||null,blok_code:t.blok_id||null,blok_name:null,mission_type:t.mission_type,description:null,scheduled_at:t.started_at?new Date(t.started_at).toISOString():null,started_at:t.started_at?new Date(t.started_at).toISOString():null,completed_at:t.completed_at?new Date(t.completed_at).toISOString():null,status:t.status||"completed",priority:"high",progress_percentage:t.progress_percentage||100,mission_details:{},created_by:null,isManual:!0}))].sort((t,s)=>{const r=t.completed_at?new Date(t.completed_at).getTime():0;return(s.completed_at?new Date(s.completed_at).getTime():0)-r});return e.jsxs(at,{children:[e.jsx(st,{title:"Kontrol Robot"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-green-50/30 to-blue-50/30",children:e.jsxs("div",{className:"p-4 md:p-6 space-y-4 md:space-y-6 max-w-7xl mx-auto",children:[e.jsx(ue,{children:O&&e.jsx(l.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:"fixed top-4 right-4 z-50",children:e.jsx($,{className:`p-4 shadow-2xl ${O.type==="success"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-green-400":"bg-gradient-to-r from-red-500 to-red-600 text-white border-red-400"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[O.type==="success"?e.jsx(De,{className:"w-5 h-5"}):e.jsx(Re,{className:"w-5 h-5"}),e.jsx("p",{className:"font-medium",children:O.message}),e.jsx("button",{onClick:()=>Z(null),className:"ml-2 hover:opacity-80",children:e.jsx(J,{className:"w-4 h-4"})})]})})})}),e.jsxs(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.div,{animate:{rotate:q?[0,5,-5,0]:0,scale:q?[1,1.05,1]:1},transition:{duration:2,repeat:1/0},className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(Ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Kontrol Robot"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Penjadwalan & Monitoring Real-time"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.current_state==="offline"?e.jsx(dt,{className:"w-5 h-5 text-red-500"}):e.jsx(it,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:u.current_state==="offline"?"Offline":"Online"})]})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs($,{className:"p-5 md:p-7 bg-gradient-to-br from-blue-50 via-cyan-50/80 to-blue-100/90 border-2 border-blue-200/60 shadow-xl overflow-hidden relative group backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 opacity-30",children:e.jsx(l.div,{animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:15,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 bg-gradient-to-br from-blue-200/40 via-cyan-200/40 to-teal-200/40",style:{backgroundSize:"200% 200%"}})}),e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(rgba(59, 130, 246, 0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.08) 1px, transparent 1px)",backgroundSize:"30px 30px"}})}),u.current_state==="idle"&&e.jsx(l.div,{animate:{opacity:[.2,.4,.2],scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 right-0 w-32 h-32 bg-blue-300/20 rounded-full blur-3xl"}),e.jsx(l.div,{animate:{x:["-100%","200%"]},transition:{duration:4,repeat:1/0,repeatDelay:3,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent skew-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(l.div,{animate:{scale:q?[1,1.15,1]:u.current_state==="idle"?[1,1.08,1]:1,rotate:q?[0,5,-5,0]:0},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"relative",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 via-cyan-400 to-teal-500 rounded-2xl flex items-center justify-center shadow-xl shadow-blue-500/40 border-2 border-white/40",children:e.jsx(Ie,{className:"w-8 h-8 text-white drop-shadow-lg"})}),u.current_state==="idle"&&e.jsx(l.div,{animate:{scale:[1,1.5,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0,ease:"easeOut"},className:"absolute inset-0 rounded-2xl border-2 border-cyan-400/60"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-extrabold text-gray-800 mb-1 drop-shadow-sm",children:"MOV Bot Alpha"}),e.jsx("p",{className:"text-xs md:text-sm text-blue-600 font-medium",children:"ROBOT-001"})]})]}),e.jsx(l.span,{whileHover:{scale:1.1,rotate:2},whileTap:{scale:.95},className:`px-4 py-2 text-sm font-extrabold rounded-full border-2 shadow-xl backdrop-blur-sm ${re(u.current_state)}`,children:ie(u.current_state)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs(l.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-4 rounded-2xl border border-blue-100/60 shadow-lg overflow-hidden group",children:[e.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${F(u.battery_level).replace("text-","bg-").replace("-500","-500/15")} blur-xl`}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${F(u.battery_level).replace("text-","bg-")} bg-opacity-15`,children:e.jsx(ot,{className:`w-5 h-5 ${F(u.battery_level)}`})}),e.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Baterai"})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-3",children:[e.jsx("p",{className:`text-3xl md:text-4xl font-black ${F(u.battery_level)} drop-shadow-sm`,children:u.battery_level}),e.jsx("span",{className:"text-sm text-gray-500 font-bold",children:"%"})]}),e.jsx("div",{className:"relative w-full bg-gray-100 rounded-full h-3 overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${u.battery_level}%`},transition:{duration:1.5,ease:"easeOut"},className:`h-full bg-gradient-to-r ${Ue(u.battery_level)} rounded-full shadow-md relative`,children:e.jsx(l.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent"})},u.battery_level)})]})]}),e.jsxs(l.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-4 rounded-2xl border border-blue-100/60 shadow-lg overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-400/15 blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/15",children:e.jsx(me,{className:"w-5 h-5 text-blue-500"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Lokasi"})]}),e.jsx("p",{className:"text-lg md:text-xl font-extrabold text-gray-800 leading-tight drop-shadow-sm",children:Ye()})]})]})]}),(oe||H)&&e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs(l.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-3 rounded-xl border border-blue-100/60 shadow-lg text-center overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-blue-400/15 blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(l.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"inline-block mb-1",children:e.jsx(ft,{className:"w-5 h-5 text-blue-500 mx-auto"})}),e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Navigasi"}),e.jsx("p",{className:"text-xs text-blue-600 font-bold mt-1",children:"Aktif"})]})]}),e.jsxs(l.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-3 rounded-xl border border-blue-100/60 shadow-lg text-center overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-green-400/15 blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(l.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},className:"inline-block mb-1",children:e.jsx(Nt,{className:"w-5 h-5 text-green-500 mx-auto"})}),e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Koneksi"}),e.jsx("p",{className:"text-xs text-green-600 font-bold mt-1",children:"Online"})]})]}),e.jsxs(l.div,{whileHover:{scale:1.05,y:-2},className:"relative bg-white/70 backdrop-blur-md p-3 rounded-xl border border-blue-100/60 shadow-lg text-center overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-purple-400/15 blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(gt,{className:"w-5 h-5 text-purple-500 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Kecepatan"}),e.jsx("p",{className:"text-xs text-gray-600 font-medium mt-1",children:"Normal"})]})]})]}),(H||f)&&e.jsxs(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 rounded-xl border-2 border-blue-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(nt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:"Misi Sedang Berjalan"})]}),e.jsxs(l.span,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"text-sm font-bold text-blue-600 bg-blue-100 px-3 py-1 rounded-full",children:[h?.progress_percentage||f?.progress_percentage||0,"%"]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:I(h?.mission_type||f?.mission_type)}),f&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:f.blok_code||`Blok #${f.blok_id}`})]}),h?.blok_id&&!f&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:h.blok_id})]}),h?.current_task&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(G,{className:"w-3 h-3 text-yellow-500"}),e.jsx("span",{className:"capitalize",children:h.current_task.replace("_"," ")})]}),h?.total_images>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx(rt,{className:"w-3 h-3 text-purple-500"}),e.jsxs("span",{children:["Gambar: ",h.images_captured,"/",h.total_images]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${h?.progress_percentage||f?.progress_percentage||0}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 rounded-full shadow-md relative overflow-hidden",children:e.jsx(l.div,{animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})})]})]})]})}),j&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx(k,{onClick:Je,variant:"outline",className:`h-12 border-2 font-medium transition-all ${(oe||H)&&!le?"border-orange-400 text-orange-600 hover:bg-orange-50 hover:border-orange-500 shadow-md":le?"border-blue-400 text-blue-600 hover:bg-blue-50 hover:border-blue-500 shadow-md bg-blue-50":"border-gray-300 text-gray-400 cursor-not-allowed"}`,disabled:!oe&&!H||D,children:D?e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}):le?e.jsxs(e.Fragment,{children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Lanjutkan Misi"]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Jeda Misi"]})}),e.jsxs(k,{onClick:()=>B(!0),className:"h-12 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Jadwalkan Misi"]}),e.jsxs(k,{onClick:()=>E(!0),className:"h-12 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 shadow-lg",disabled:u.current_state==="offline",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Aktifkan Manual"]})]})}),e.jsx(ue,{children:Fe&&j&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsxs($,{className:"p-4 md:p-6 border-2 border-purple-200 bg-white/80 backdrop-blur-sm shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-purple-600"}),"Aktifkan Robot Manual"]}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm font-medium mb-2 block",children:"Mode Misi"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["deteksi","penyiraman","pemupukan","kombinasi"].map(t=>e.jsx("button",{type:"button",onClick:()=>He(t),className:`p-3 text-sm rounded-xl border-2 transition-all font-medium ${K===t?"border-purple-500 bg-purple-50 text-purple-700 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:I(t)},t))})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"manual-blok",className:"text-sm font-medium mb-2 block",children:"Blok Kebun"}),e.jsxs("select",{id:"manual-blok",value:v,onChange:t=>Me(t.target.value),className:"w-full p-3 text-sm border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Blok"}),V.map(t=>e.jsxs("option",{value:t.id,children:[t.code," - ",t.name]},t.id))]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>E(!1),className:"flex-1 h-11",children:"Batal"}),e.jsx(k,{type:"button",onClick:We,className:"flex-1 h-11 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",disabled:D||!v||u.current_state==="offline",children:D?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Mengaktifkan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Aktifkan Robot"]})})]})]})]})})}),e.jsx(ue,{children:Ke&&j&&e.jsx(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:e.jsxs($,{className:"p-4 md:p-6 border-2 border-green-200 bg-white/80 backdrop-blur-sm shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),"Jadwalkan Misi Baru"]}),e.jsx("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:ze,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-sm font-medium mb-2 block",children:"Tipe Misi"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["deteksi","penyiraman","pemupukan","kombinasi"].map(t=>e.jsx("button",{type:"button",onClick:()=>qe(t),className:`p-3 text-sm rounded-xl border-2 transition-all font-medium ${xe===t?"border-green-500 bg-green-50 text-green-700 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:I(t)},t))})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"blok",className:"text-sm font-medium mb-2 block",children:"Blok Kebun"}),e.jsxs("select",{id:"blok",value:be,onChange:t=>fe(t.target.value),className:"w-full p-3 text-sm border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Blok"}),V.map(t=>e.jsxs("option",{value:t.id,children:[t.code," - ",t.name]},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(S,{htmlFor:"tanggal",className:"text-sm font-medium mb-2 block",children:"Tanggal"}),e.jsx(ce,{id:"tanggal",type:"date",className:"h-11 text-sm",value:ye,onChange:t=>je(t.target.value),min:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"waktu",className:"text-sm font-medium mb-2 block",children:"Waktu"}),e.jsx(ce,{id:"waktu",type:"time",className:"h-11 text-sm",value:we,onChange:t=>_e(t.target.value),required:!0})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"priority",className:"text-sm font-medium mb-2 block",children:"Prioritas"}),e.jsxs("select",{id:"priority",value:ke,onChange:t=>Se(t.target.value),className:"w-full p-3 text-sm border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",children:[e.jsx("option",{value:"low",children:"Rendah"}),e.jsx("option",{value:"medium",children:"Sedang"}),e.jsx("option",{value:"high",children:"Tinggi"}),e.jsx("option",{value:"urgent",children:"Mendesak"})]})]}),e.jsxs("div",{children:[e.jsx(S,{htmlFor:"description",className:"text-sm font-medium mb-2 block",children:"Deskripsi (Opsional)"}),e.jsx(ce,{id:"description",type:"text",className:"h-11 text-sm",value:ve,onChange:t=>Ne(t.target.value),placeholder:"Tambahkan catatan untuk misi ini..."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>B(!1),className:"flex-1 h-11",children:"Batal"}),e.jsx(k,{type:"submit",className:"flex-1 h-11 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",disabled:D,children:D?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Menyimpan..."]}):"Simpan Jadwal"})]})]})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs($,{className:"p-4 md:p-6 bg-white/80 backdrop-blur-sm border-2 border-blue-200/50 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Jadwal Misi"})]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:M,className:"text-xs",children:[e.jsx(lt,{className:"w-3 h-3 mr-1"}),"Refresh"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:Ce.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Tidak ada jadwal aktif"}):Ce.map((t,s)=>e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},whileHover:{scale:1.02,y:-2,x:5},className:`p-5 md:p-6 rounded-2xl border-2 shadow-lg hover:shadow-xl transition-all duration-300 ${t.status==="paused"?"bg-gradient-to-br from-orange-50/90 via-orange-100/80 to-amber-50/90 border-orange-300/60 shadow-orange-200/50":t.status==="in_progress"?"bg-gradient-to-br from-emerald-50/90 via-green-50/80 to-teal-50/90 border-emerald-300/60 shadow-emerald-200/50":"bg-gradient-to-br from-blue-50/90 via-cyan-50/80 to-sky-50/90 border-blue-300/60 shadow-blue-200/50"}`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-800",children:t.blok_code||`Blok #${t.blok_id}`}),t.blok_name&&e.jsxs("span",{className:"text-xs text-gray-500",children:["- ",t.blok_name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-bold shadow-md ${re(t.status)}`,children:ie(t.status)}),j&&(t.status==="pending"||t.status==="in_progress"||t.status==="paused")&&e.jsx("button",{onClick:()=>Xe(t.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-1.5 rounded-lg transition-colors",title:"Batalkan jadwal",children:e.jsx(J,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${t.mission_type==="deteksi"?"bg-purple-100":t.mission_type==="penyiraman"?"bg-blue-100":t.mission_type==="pemupukan"?"bg-green-100":"bg-gray-100"}`,children:t.mission_type==="deteksi"?"ðŸ”":t.mission_type==="penyiraman"?"ðŸ’§":t.mission_type==="pemupukan"?"ðŸŒ±":"ðŸ“‹"}),e.jsx("p",{className:"text-base font-bold text-gray-800",children:I(t.mission_type)})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1.5 bg-white/80 rounded-lg shadow-sm",children:[e.jsx(U,{className:"w-3 h-3 text-gray-500"}),e.jsx("span",{className:"text-gray-700 font-medium",children:ne(t.scheduled_at)})]}),t.priority&&e.jsxs("span",{className:`px-3 py-1.5 rounded-lg font-semibold shadow-sm ${t.priority==="urgent"?"bg-red-100 text-red-700 border border-red-200":t.priority==="high"?"bg-orange-100 text-orange-700 border border-orange-200":t.priority==="medium"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[t.priority==="urgent"?"ðŸš¨":t.priority==="high"?"âš¡":""," ",t.priority.toUpperCase()]})]}),(t.progress_percentage>0||t.status==="in_progress"||t.status==="paused")&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${t.progress_percentage||0}%`},transition:{duration:.5,ease:"easeOut"},className:`h-2.5 rounded-full shadow-sm ${t.status==="paused"?"bg-gradient-to-r from-orange-400 to-orange-500":"bg-gradient-to-r from-green-500 to-emerald-500"}`},t.progress_percentage||0)}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("p",{className:`text-xs font-medium ${t.status==="paused"?"text-orange-600":"text-green-600"}`,children:[t.status==="paused"&&"â¸ï¸ ",t.progress_percentage||0,"%"]}),t.status==="paused"&&e.jsx("span",{className:"text-xs text-orange-600 font-semibold animate-pulse",children:"â¸ DIJEDA"})]})]})]},t.id))})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs($,{className:"p-4 md:p-6 bg-white/80 backdrop-blur-sm border-2 border-gray-200/50 shadow-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Riwayat Misi"})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:$e.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Tidak ada riwayat misi"}):$e.map((t,s)=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.05},whileHover:{scale:1.02,y:-2,x:5},className:"bg-gradient-to-br from-gray-50/90 via-slate-50/80 to-gray-100/90 p-5 md:p-6 rounded-2xl border-2 border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-800",children:t.blok_code||`Blok #${t.blok_id}`}),t.blok_name&&e.jsxs("span",{className:"text-xs text-gray-500",children:["- ",t.blok_name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.status==="completed"||t.status==="done"?e.jsx(De,{className:"w-5 h-5 text-green-600"}):e.jsx(Re,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-bold shadow-md ${re(t.status)}`,children:ie(t.status)}),j&&e.jsx("button",{onClick:()=>Ge(t.id,t.isManual),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-1.5 rounded-lg transition-colors",title:"Hapus riwayat misi",children:e.jsx(ut,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-gray-800 mb-2 font-medium",children:I(t.mission_type)}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["ðŸ“… ",ne(t.scheduled_at),t.completed_at&&` â€¢ Selesai: ${ne(t.completed_at)}`]}),t.description&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:t.description})]},t.id))})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs($,{className:"p-4 bg-blue-50 border-2 border-blue-200 shadow-xl",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(pt,{className:"w-4 h-4"}),"Informasi"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsx("li",{children:"â€¢ Robot otomatis kembali ke charging station saat baterai <20%"}),e.jsx("li",{children:"â€¢ Misi kombinasi menggabungkan deteksi dan penyiraman/pemupukan"}),e.jsx("li",{children:"â€¢ K-Petani dapat mengontrol penuh jadwal dan operasi robot"}),e.jsx("li",{children:"â€¢ Status robot diperbarui secara real-time dari Firebase"})]})]})})]})})]})}export{Ut as default};
